<!DOCTYPE html>
<head>
	<meta http-equiv='Content-Type' content='text/html;charset=utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no'>
	<title>
		郭健- Linux调度器中的PELT(Per-Entity Load Tracking)
	</title>
	<script src='https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js'>
	</script>
	<style>
		a {color: #607fa6;text-decoration:none;word-wrap:break-word;word-break:break-all;}.rich_media_title{padding-bottom:10px;margin-bottom:14px;border-bottom:1px solid #e7e7eb;font-weight:400;} .rich_media_meta_list{font-size:14px;margin-bottom: 22px;}
		.rich_media_meta{display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:14px;}.rich_media_meta_text{color:#8c8c8c;color:rgba(0, 0, 0, 0.3)}.rich_media_meta_list
		em {font-style: normal;}@media screen and (max-width:768px){.rich_media{position:
		relative;padding: 20px 15px 15px;background-color: #fff;}}.rich_media_content{text-align:justify;} .rich_media_content * {max-width:100%!important;box-sizing: border-box!important;-webkit-box-sizing:
		border-box!important;word-wrap: break-word!important;}.rich_media_content
		blockquote {margin: 0;padding-left: 10px;border-left: 3px solid #dbdbdb;}.rich_media_content
		.list-paddingleft-2 {padding-left: 2.2em;}a.rich_media_meta_nickname{display: none;}@media screen and (min-width:1025px){.rich_media{position:relative;}a.rich_media_meta_nickname{display:inline-block!important;}span.rich_media_meta_nickname
		{display: inline-block!important;}.rich_media {width:677px;margin-left:auto;margin-right:auto;}}a.fwjm{font-size: 12px;color: #ececec;}.tenvideo_player {position: relative;width:
		100 %;height: 100 %;margin: auto;background: #000;}* {margin:0px;padding:0px;} body{line-height: 1.6;letter-spacing: .034em;}
		.dy_all {text-align: center;margin: 30px 0;} .dy_all a {display: inline-block;height:
		38px;line-height: 38px;padding: 0 18px;background-color: #009688;color:
		#fff;white-space: nowrap;font-size: 14px;border: none;border-radius: 2px;cursor:
		pointer;text-align: center;outline: 0;-webkit-appearance: none;transition:
		all .3s;-webkit-transition: all .3s;box-sizing: border-box;} img{max-width: 677px!important;}

		.crawler-info{padding: 8px 0;} .article-link>img{margin-left: 20px;width: 16px;}
		.comment-item::before,.comment-item::after{content:'';display:block;height:0;visibility:hidden;clear:both;*zoom:1;} .comment-item{margin-bottom:30px;}
		.avatar{width:12%; padding-right:10px;float:left;box-sizing:border-box;} .avatar img{width:100%;}
		.comment-body{float:left;width:88%;} .comment-body .comment-info{color:#b3b3b3;margin-bottom:4px;margin-top: -5px;} .comment-body .comment-info>span:last-child{float:right;} 
		.comment-author{border-left:4px solid green;padding-left:6px;margin:8px 0;}

		@media screen and (max-width: 420px) {.article-link>img {margin-left: 0px;}}
		@media screen and (min-width: 480px) {.avatar {width: 9%;}.comment-body {width: 91%;}}
	</style>
</head>
<body>
	<div id='js_article' class='rich_media'>
		<div class="crawler-info">
			<a href='https://www.52pojie.cn' class='fwjm' target='_blank'>
				提供的爬取软件来源于：52pojie.cn@夜泉 免费下载使用
			</a>
			<a href='https://mp.weixin.qq.com/s?__biz=MzAwMDUwNDgxOA==&amp;mid=2652665809&amp;idx=1&amp;sn=367fb81a4a1f64a4e9412adbeac8b6e7&amp;chksm=810f314cb678b85a6ad25c75ad5508a482df5cbb687df2c7c40fe955e64b807ea963f3855613&amp;scene=27#wechat_redirect&cpage=7' target='_blank' class="article-link">
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk4QUEzQzVDNkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk4QUEzQzVENkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OThBQTNDNUE2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OThBQTNDNUI2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5TKSKsAAAAclBMVEUuLi77+/stLS1VVVXx8fFOTk7s7Ozt7e1qamp5eXlNTU2WlpZFRUU6Ojrq6urn5+d/f3/8/Pw9PT0/Pz+YmJg8PDyZmZlAQECfn5+QkJBBQUFra2vo6OhDQ0OSkpKenp5WVlY+Pj7r6+tpaWksLCz///9o6ILHAAAAJnRSTlP/////////////////////////////////////////////////AKd6gbwAAACNSURBVHjajJHpEoIwDISDVMotcnuCmLz/K9KCdlqO6v7p7Mw3yW4KxG85fnUkIVfZ5J0SsCtqcgRw0HzjQYY2AAOIdRuaK4ReAPJ5nmglL5qICahpU60C0uXguQ9TgIwGJoDnT9z/ABmxt60ot0N2CsDLfb9mvBxs9ql+n5o9bEDBgbif7/1F4g80CjAAqrVAnnsm5f8AAAAASUVORK5CYII=" />
			</a>
		</div>
		<div id="img-content">

                
                <h2 class="rich_media_title" id="activity-name">郭健: Linux调度器中的PELT(Per-Entity Load Tracking)</h2>
                <div id="meta_content" class="rich_media_meta_list">
                                                                                                            <span class="rich_media_meta rich_media_meta_text">
                                                        郭健
                                                    </span>
                                                                
                                        <span class="rich_media_meta rich_media_meta_nickname" id="profileBt"><a href="javascript:void(0);">Linux阅码场</a>
                      <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                          <div class="profile_inner">
                              <strong class="profile_nickname">Linux阅码场</strong>
                              <img class="profile_avatar" id="js_profile_qrcode_img" src="" alt="">

                              <p class="profile_meta">
                              <label class="profile_meta_label">微信号</label>
                              <span class="profile_meta_value">LinuxDev</span>
                              </p>

                              <p class="profile_meta">
                              <label class="profile_meta_label">功能介绍</label>
                              <span class="profile_meta_value">专业的Linux技术社区和Linux操作系统学习平台，内容涉及Linux内核,Linux内存管理,Linux进程管理,Linux文件系统和IO,Linux性能调优,Linux设备驱动以及Linux虚拟化和云计算等各方各面.</span>
                              </p>
                              
                          </div>
                          <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                              <i class="profile_arrow arrow_out"></i>
                              <i class="profile_arrow arrow_in"></i>
                          </span>
                      </div>
                    </span>


                    <em id="publish_time" class="rich_media_meta rich_media_meta_text">2019-05-25</em>





                </div>

                
                
                                
                
                
                
                                                
                                                                
                                
                
                <div class="rich_media_content " id="js_content">
                    

                    

                    
                    
                    <section style="box-sizing: border-box;font-size: 16px;"><section style="box-sizing: border-box;" powered-by="xiumi.us"><section style="margin-top: 10px;margin-bottom: 10px;text-align: left;box-sizing: border-box;"><section style="display: inline-block;box-sizing: border-box;"><span style="display: block;padding: 0.3em 0.5em;border-radius: 0.8em 0.8em 0px 0px;background-color: rgb(249, 110, 87);font-size: 14px;color: rgb(255, 255, 255);box-sizing: border-box;"><p style="box-sizing: border-box;">本文来源</p></span></section><section style="border-width: 1px;border-style: solid;border-color: rgb(249, 110, 87);border-radius: 0px 0px 0.8em 0.8em;padding: 10px;box-sizing: border-box;"><section style="box-sizing: border-box;" powered-by="xiumi.us"><section style="box-sizing: border-box;"><section style="text-align: justify;box-sizing: border-box;"><section style="box-sizing: border-box;"><em style="color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);">蜗窝科技</em></section><section style="box-sizing: border-box;"><span style="font-size: 12px;">http://www.wowotech.net/process_management/PELT.html</span></section><section style="box-sizing: border-box;"><span style="color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;text-align: left;background-color: rgb(255, 255, 255);font-size: 12px;">本文是对https://lwn.net/Articles/531853/的翻译，</span></section></section></section></section></section></section></section></section><p><span style="font-size: 12px;"><br  /></span></p><p style="text-align: center;"><img class="rich_pages" data-ratio="0.32365747460087085" data-s="300,640" src="data:image/JPG;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCADfArEDASIAAhEBAxEB/8QAHAABAAIDAQEBAAAAAAAAAAAAAAQGAQMFAgcI/8QAUBAAAQMDAgIGBQcKAwUFCQAAAQACAwQFEQYSITETFEFRYZEHIlKh0RUyVXGBlNMWFyMzU1ZXkrHSJnKCCDRCYpUkNXSywTY3Q0dlc8Lh8P/EABcBAQEBAQAAAAAAAAAAAAAAAAABAgP/xAAhEQEBAAEEAgMBAQAAAAAAAAAAARECEiExQVETIlIDcf/aAAwDAQACEQMRAD8A/VKIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAhCIgYQBEQEREBERAREQEREBERAREQEREDCIiAiIgIiICIiAiIgJhEQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERARFwNS6po9P3Cy0lZHK+S61QpISwZAdtLsnw9UoO+ij11ZT0FL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 " src="Ass1lsY6byvGpVFKeu9YE0vyCrE9NLhBVAz46loLvicp2xacBR8L1Tc8W8lpJU1Vnk2Dr7QiaXl3Iyoz0y1kfkGQ"  data-type="png" data-w="689" style=""  /></p><p><br  /><span style="color: rgb(50, 50, 50);text-align: left;background-color: rgb(255, 255, 255);font-size: 16px;font-family: 宋体;"></span></p><p><span style="color: rgb(50, 50, 50);text-align: left;background-color: rgb(255, 255, 255);font-size: 16px;font-family: 宋体;">一、为何需要per-entity load tracking？</span></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">对于Linux内核而言，做一款好的进程调度器是一项非常具有挑战性的任务，主要原因是在进行CPU资源分配的时候必须满足如下的需求：</span></p><p style="padding-bottom: 15px;margin-left: 24px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">1、</span><span style="font-size: 16px;font-family: 宋体;">它必须是公平的</span></p><p style="padding-bottom: 15px;margin-left: 24px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">2、</span><span style="font-size: 16px;font-family: 宋体;">快速响应</span></p><p style="padding-bottom: 15px;margin-left: 24px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">3、</span><span style="font-size: 16px;font-family: 宋体;">系统的throughput要高</span></p><p style="padding-bottom: 15px;margin-left: 24px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">4、</span><span style="font-size: 16px;font-family: 宋体;">功耗要小</span></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">其实你仔细分析上面的需求，这些目标其实是相互冲突的，但是用户在提需求的时候就是这么任性，他们期望所有的需求都满足，而且不管系统中的负荷情况如何。因此，纵观Linux内核调度器这些年的发展，各种调度器算法在内核中来来去去，这也就不足为奇了。当然，2007年，2.6.23版本引入“完全公平调度器”（CFS）之后，调度器相对变得稳定一些。最近一个最重大的变化是在3.8版中合并的Per-entity load tracking。</span></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">完美的调度算法需要一个能够预知未来的水晶球：只有当内核准确地推测出每个进程对系统的需求，她才能最佳地完成调度任务。不幸的是，硬件制造商推出各种性能强劲的处理器，但从来也不考虑预测进程负载的需求。在没有硬件支持的情况下，调度器只能祭出通用的预测大法：用“过去”预测“未来”，也就是说调度器是基于过去的调度信息来预测未来该进程对CPU的需求。而在这些调度信息中，每一个进程过去的“性能”信息是核心要考虑的因素。但有趣的是，虽然内核密切跟踪每个进程实际运行的时间，但它并不清楚每个进程对系统负载的贡献程度。</span></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">有人可能会问：“消耗的CPU时间”和“负载（load）”是否有区别？是的，当然有区别，Paul Turner在提交per-entity load tracking补丁集的时候对这个问题做了回答。一个进程即便当前没有在cpu上运行，例如：该进程仅仅是挂入runqueue等待执行，它也能够对cpu&nbsp;负载作出贡献。“负载”是一个瞬时量，表示当前时间点的进程对系统产生的“压力”是怎样的？显然runqueue中有10个等待运行的进程对系统造成的“压力”要大于一个runqueue中只有1个等待进程的场景。与之相对的“CPU使用率（usage）”不一样，它不是瞬时量，而是一个累积量。有一个长时间运行的进程，它可能上周占用大量的处理器时间，但是现在可能占用很少的cpu时间，尽管它过去曾经“辉煌”过（占用大量CPU时间），但这对现在的系统负荷贡献很小。</span></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">3.8</span><span style="font-size: 16px;font-family: 宋体;">版本之前的内核CFS调度器在计算CPU load的时候采用的是跟踪每个运行队列上的负载（per-rq load tracking）。需要注意的是：CFS中的“运行队列”实际上是有多个，至少每个CPU就有一个runqueue。而且，当使用“按组调度”（&nbsp;group scheduling）功能时，每个控制组（control group）都有自己的per-CPU运行队列。对于per-rq的负载跟踪方法，调度器可以了解到每个运行队列对整个系统负载的贡献。这样的统计信息足以帮助组调度器（group scheduler）在控制组之间分配CPU时间，但从整个系统的角度看，我们并不知道当前负载来自何处。除此之外，per-rq的负载跟踪方法还有另外一个问题，即使在工作负载相对稳定的情况下，跟踪到的运行队列的负载值也会变化很大。</span></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><strong><span style="font-size: 16px;font-family: 宋体;">二、如何进行</span></strong><span style="font-size: 16px;font-family: 宋体;">per-entity load tracking</span><span style="font-size: 16px;font-family: 宋体;">？</span></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">Per-entity load tracking</span><span style="font-size: 16px;font-family: 宋体;">系统解决了这些问题，这是通过把负载跟踪从per rq推进到per-entity的层次。所谓调度实体（scheduling entity）其实就是一个进程或者control group中的一组进程。为了做到Per-entity的负载跟踪，时间（物理时间，不是虚拟时间）被分成了1024us的序列，在每一个1024us的周期中，一个entity对系统负载的贡献可以根据该实体处于runnable状态（正在CPU上运行或者等待cpu调度运行）的时间进行计算。如果在该周期内，runnable的时间是x，那么对系统负载的贡献就是（x/1024）。当然，一个实体在一个计算周期内的负载可能会超过1024us，这是因为我们会累积在过去周期中的负载，当然，对于过去的负载我们在计算的时候需要乘一个衰减因子。如果我们让Li表示在周期pi中该调度实体的对系统负载贡献，那么一个调度实体对系统负荷的总贡献可以表示为：</span></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><em><span style="font-size: 16px;font-family: 宋体;">L = L<sub>0</sub>&nbsp;+ L<sub>1</sub>*y + L<sub>2</sub>*y<sup>2</sup>&nbsp;+ L<sub>3</sub>*y<sup>3</sup>&nbsp;+ ...</span></em></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">&nbsp;</span></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">其中y是衰减因子。通过上面的公式可以看出：</span></p><p style="padding-bottom: 15px;margin-left: 48px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">（1）&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-size: 16px;font-family: 宋体;">调度实体对系统负荷的贡献值是一个序列之和组成</span></p><p style="padding-bottom: 15px;margin-left: 48px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">（2）&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-size: 16px;font-family: 宋体;">最近的负荷值拥有最大的权重</span></p><p style="padding-bottom: 15px;margin-left: 48px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">（3）&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-size: 16px;font-family: 宋体;">过去的负荷也会被累计，但是是以递减的方式来影响负载计算。</span></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">使用这样序列的好处是计算简单，我们不需要使用数组来记录过去的负荷贡献，只要把上次的总负荷的贡献值乘以<em>y</em>再加上新的L0负荷值就OK了。</span></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">在3.8版本的代码中，<em>y</em>已经确定：<em>y</em>&nbsp;^32等于0.5。这样选定的<em>y</em>值，一个调度实体的负荷贡献经过32个周期（1024us）后，对当前时间的的符合贡献值会衰减一半。</span></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">一旦我们有了计算runnable调度实体负荷贡献值的方法，那么这个负荷值可以向上传递，通过累加control group中的每一个调度实体负荷值可以得到该control group对应的调度实体的负荷值。这样的算法不断的向上推进，可以得到整个系统的负荷。当然，计算负荷不是那么简单。因为调度器本身就会定期的观察记录调度实体的信息，计算runnable调度实体的负荷贡献是容易的。但没有处于runnable状态的调度实体就对系统负荷没有贡献了吗？当“密码破解”进程由于page fault而阻塞，它其实仍然会给 “系统列车”增加“负荷”。因此我们需要有一种计算进入阻塞状态的进程对系统负载贡献的方法，当前不是调度器需要关注的。</span></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">当然，内核可以选择记录所有进入阻塞状态的进程，像往常一样衰减它们的负载贡献，并将其增加到总负载中。但这么做是非常耗费资源的。所以，相反，3.8版本的调度器在每个cfs_rq（每个control group都有自己的cfs rq）数据结构中，维护一个“blocked load”的成员，这个成员记录了所有阻塞状态进程对系统负荷的贡献。当一个进程阻塞了，它的负载会从总的运行负载值（runnable load）中减去并添加到总的阻塞负载值（blocked load）中。该负载可以以相同的方式衰减（即每个周期乘以y）。当阻塞的进程再次转换成运行态时，其负载值（适当进行衰减）则转移到运行负荷上来。因此，跟踪blocked load只是需要在进程状态转换过程中有一点计算量，调度器并不需要由于跟踪阻塞负载而遍历一个进入阻塞状态进程的链表。</span></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">另外一个比较繁琐的地方是对节流进程（throttled processes）负载的计算。所谓节流进程是指那些在“CFS带宽控制器”（&nbsp;CFS bandwidth controller）下控制运行的进程。当这些进程用完了本周期内的CPU时间，即使它们仍然在运行状态，即使CPU空闲，调度器并不会把CPU资源分配给它们。因此节流进程不会对系统造成负荷。正因为如此，当进程处于被节流状态的时候，它们对系统负荷的贡献值不应该按照runnable进程计算。在等待下一个周期到来之前，throttled processes不能获取cpu资源，因此它们的负荷贡献值会衰减。</span></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><strong><span style="font-size: 16px;font-family: 宋体;">三、</span></strong><span style="font-size: 16px;font-family: 宋体;">per-entity load tracking</span><span style="font-size: 16px;font-family: 宋体;">有什么好处？</span></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">有了Per-entity负载跟踪机制，在没有增加调度器开销的情况下，调度器现在对每个进程和“调度进程组”对系统负载的贡献有了更清晰的认识。有了更精细的统计数据（指per entity负载值）通常是好的，但人们可能会怀疑这些信息是否真的对调度器有用。</span></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">我们可以通过跟踪的per entity负载值做一些有用的事情。最明显的使用场景可能是用于负载均衡：即把runnable进程平均分配到系统的CPU上，使每个CPU承载大致相同的负载。如果内核知道每个进程对系统负载有多大贡献，它可以很容易地计算迁移到另一个CPU的效果。这样进程迁移的结果应该更准确，从而使得负载平衡不易出错。目前已经有一些补丁利用per entity负载跟踪来改进调度器的负载均衡，相信这些补丁会在不久的将来进入到内核主线。</span></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">small-task packing patch</span><span style="font-size: 16px;font-family: 宋体;">的目标是将“小”进程收集到系统中的部分CPU上，从而允许系统中的其他处理器进入低功耗模式。在这种情况下，显然我们需要一种方法来计算得出哪些进程是“小”的进程。利用per-entity load tracking，内核可以轻松的进行识别。</span></p><p style="padding-bottom: 15px;line-height: 20px;color: rgb(50, 50, 50);font-family: Arial, Helvetica, sans-serif;font-size: 13px;text-align: left;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size: 16px;font-family: 宋体;">内核中的其他子系统也可以使用per entity负载值做一些“文章”。CPU频率调节器（CPU frequency governor）和功率调节器（CPU power governor）可以利用per entity负载值来猜测在不久的将来，系统需要提供多少的CPU计算能力。既然有了per-entity load tracking这样的基础设施，我们期待看到开发人员可以使用per-entity负载信息来优化系统的行为。虽然per-entity load tracking仍然不是一个能够预测未来的水晶球，但至少我们对当前的系统中的进程对CPU资源的需求有了更好的理解。</span></p><p><br  /></p><p><br  /></p>
                </div>
                

                
  <div class="ct_mpda_wrp" id="js_sponsor_ad_area" style="display: none;"></div>


                
                <div class="read-more__area" id="js_more_read_area" style="display:none;">
                    
                </div>

                
                                <div class="reward_area tc reward_area_primary" id="js_preview_reward_author" style="display:none;">
                    <div class="reward-avatar" style="display: none;" id="js_preview_reward_author_avatar">
                        <img src="" alt="" id="js_preview_reward_author_head">
                    </div>
                    
                                        <div class="reward-author" id="js_preview_reward_author_name">郭健</div>
                                        <p class="reward_tips" id="js_preview_reward_author_wording" style="display:none;"></p>
                    <p class="reward_button_wrp">
                    
                      <span class="reward_pop_panel">
                        <img src="https://res.wx.qq.com/mpres/zh_CN/htmledition/pages/home/index/pic_mp_app4290ba.png" alt="">
                        <strong>扫一扫下载订阅号助手，用手机发文章</strong>
                      </span>
                        <a class="reward_button" id='js_preview_reward_author_link' href="##"><span id="js_preview_reward_link_text">赞赏</span></a>
                    </p>
                </div>

                <div class="reward_qrcode_area reward_area tc" id="js_preview_reward_qrcode" style="display:none;">
                    <p class="tips_global">长按二维码向我转账</p>
                    <p id="js_preview_reward_ios_wording" class="reward_tips" style="display:none;"></p>
                    <span class="reward_qrcode_img_wrp"><img class="reward_qrcode_img" src="res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/pic/appmsg/pic_reward_qrcode.2x42f400.png"></span>
                    <p class="tips_global">受苹果公司新规定影响，微信 iOS 版的赞赏功能被关闭，可通过二维码转账支持公众号。</p>
                </div>
                            </div>
		<div class="comment">
			<h3 style="margin:26px 0;font-weight:100;padding-bottom:4px;border-bottom:1px solid #ccc;">精选留言</h3>
		    暂无...
		</div>
	</div>
	<div class='dy_all'>
		<a href='https://www.52pojie.cn/' target='_blank'>
			吾爱破解论坛
		</a>
	</div>
</body>