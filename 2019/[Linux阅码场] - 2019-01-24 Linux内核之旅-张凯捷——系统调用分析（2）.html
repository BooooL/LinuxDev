<!DOCTYPE html>
<head>
	<meta http-equiv='Content-Type' content='text/html;charset=utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no'>
	<title>
		Linux内核之旅-张凯捷——系统调用分析（2）
	</title>
	<script src='https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js'>
	</script>
	<style>
		a {color: #607fa6;text-decoration:none;word-wrap:break-word;word-break:break-all;}.rich_media_title{padding-bottom:10px;margin-bottom:14px;border-bottom:1px solid #e7e7eb;font-weight:400;} .rich_media_meta_list{font-size:14px;margin-bottom: 22px;}
		.rich_media_meta{display:inline-block;vertical-align:middle;margin-right:8px;margin-bottom:10px;font-size:14px;}.rich_media_meta_text{color:#8c8c8c;color:rgba(0, 0, 0, 0.3)}.rich_media_meta_list
		em {font-style: normal;}@media screen and (max-width:768px){.rich_media{position:
		relative;padding: 20px 15px 15px;background-color: #fff;}}.rich_media_content{text-align:justify;} .rich_media_content * {max-width:100%!important;box-sizing: border-box!important;-webkit-box-sizing:
		border-box!important;word-wrap: break-word!important;}.rich_media_content
		blockquote {margin: 0;padding-left: 10px;border-left: 3px solid #dbdbdb;}.rich_media_content
		.list-paddingleft-2 {padding-left: 2.2em;}a.rich_media_meta_nickname{display: none;}@media screen and (min-width:1025px){.rich_media{position:relative;}a.rich_media_meta_nickname{display:inline-block!important;}span.rich_media_meta_nickname
		{display: inline-block!important;}.rich_media {width:677px;margin-left:auto;margin-right:auto;}}a.fwjm{font-size: 12px;color: #ececec;}.tenvideo_player {position: relative;width:
		100 %;height: 100 %;margin: auto;background: #000;}* {margin:0px;padding:0px;} body{line-height: 1.6;letter-spacing: .034em;}
		.dy_all {text-align: center;margin: 30px 0;} .dy_all a {display: inline-block;height:
		38px;line-height: 38px;padding: 0 18px;background-color: #009688;color:
		#fff;white-space: nowrap;font-size: 14px;border: none;border-radius: 2px;cursor:
		pointer;text-align: center;outline: 0;-webkit-appearance: none;transition:
		all .3s;-webkit-transition: all .3s;box-sizing: border-box;} img{max-width: 677px!important;}

		.crawler-info{padding: 8px 0;} .article-link>img{margin-left: 20px;width: 16px;}
		.comment-item::before,.comment-item::after{content:'';display:block;height:0;visibility:hidden;clear:both;*zoom:1;} .comment-item{margin-bottom:30px;}
		.avatar{width:12%; padding-right:10px;float:left;box-sizing:border-box;} .avatar img{width:100%;}
		.comment-body{float:left;width:88%;} .comment-body .comment-info{color:#b3b3b3;margin-bottom:4px;margin-top: -5px;} .comment-body .comment-info>span:last-child{float:right;} 
		.comment-author{border-left:4px solid green;padding-left:6px;margin:8px 0;}

		@media screen and (max-width: 420px) {.article-link>img {margin-left: 0px;}}
		@media screen and (min-width: 480px) {.avatar {width: 9%;}.comment-body {width: 91%;}}
	</style>
</head>
<body>
	<div id='js_article' class='rich_media'>
		<div class="crawler-info">
			<a href='https://www.52pojie.cn' class='fwjm' target='_blank'>
				提供的爬取软件来源于：52pojie.cn@夜泉 免费下载使用
			</a>
			<a href='https://mp.weixin.qq.com/s?__biz=MzAwMDUwNDgxOA==&amp;mid=2652665639&amp;idx=1&amp;sn=58ccc2c9896b36fc98d80ea0fe720b2c&amp;chksm=810f31bab678b8ac5a828886ae30878ba1c67a37dbe4dc9dd2855b00681eb6bef7174f61ff60&amp;scene=27#wechat_redirect&cpage=10' target='_blank' class="article-link">
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk4QUEzQzVDNkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk4QUEzQzVENkNGQjExRTk5NzNBQ0VBMjgzMjY1NjkwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OThBQTNDNUE2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OThBQTNDNUI2Q0ZCMTFFOTk3M0FDRUEyODMyNjU2OTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5TKSKsAAAAclBMVEUuLi77+/stLS1VVVXx8fFOTk7s7Ozt7e1qamp5eXlNTU2WlpZFRUU6Ojrq6urn5+d/f3/8/Pw9PT0/Pz+YmJg8PDyZmZlAQECfn5+QkJBBQUFra2vo6OhDQ0OSkpKenp5WVlY+Pj7r6+tpaWksLCz///9o6ILHAAAAJnRSTlP/////////////////////////////////////////////////AKd6gbwAAACNSURBVHjajJHpEoIwDISDVMotcnuCmLz/K9KCdlqO6v7p7Mw3yW4KxG85fnUkIVfZ5J0SsCtqcgRw0HzjQYY2AAOIdRuaK4ReAPJ5nmglL5qICahpU60C0uXguQ9TgIwGJoDnT9z/ABmxt60ot0N2CsDLfb9mvBxs9ql+n5o9bEDBgbif7/1F4g80CjAAqrVAnnsm5f8AAAAASUVORK5CYII=" />
			</a>
		</div>
		<div id="img-content">

                
                <h2 class="rich_media_title" id="activity-name">Linux内核之旅/张凯捷——系统调用分析（2）</h2>
                <div id="meta_content" class="rich_media_meta_list">
                                                                                                            <span class="rich_media_meta rich_media_meta_text">
                                                        张凯捷
                                                    </span>
                                                                
                                        <span class="rich_media_meta rich_media_meta_nickname" id="profileBt"><a href="javascript:void(0);">Linux阅码场</a>
                      <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                          <div class="profile_inner">
                              <strong class="profile_nickname">Linux阅码场</strong>
                              <img class="profile_avatar" id="js_profile_qrcode_img" src="" alt="">

                              <p class="profile_meta">
                              <label class="profile_meta_label">微信号</label>
                              <span class="profile_meta_value">LinuxDev</span>
                              </p>

                              <p class="profile_meta">
                              <label class="profile_meta_label">功能介绍</label>
                              <span class="profile_meta_value">专业的Linux技术社区和Linux操作系统学习平台，内容涉及Linux内核,Linux内存管理,Linux进程管理,Linux文件系统和IO,Linux性能调优,Linux设备驱动以及Linux虚拟化和云计算等各方各面.</span>
                              </p>
                              
                          </div>
                          <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                              <i class="profile_arrow arrow_out"></i>
                              <i class="profile_arrow arrow_in"></i>
                          </span>
                      </div>
                    </span>


                    <em id="publish_time" class="rich_media_meta rich_media_meta_text">2019-01-24</em>





                </div>

                
                
                                
                
                
                
                                                
                                                                
                                
                
                <div class="rich_media_content " id="js_content">
                    

                    

                    
                    
                    <section data-role="outer" label="Powered by 135editor.com" style="max-width: 100%;font-variant-numeric: normal;font-variant-east-asian: normal;letter-spacing: 0.544px;white-space: normal;widows: 1;font-size: 16px;font-family: 微软雅黑;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-role="outer" label="Powered by 135editor.com" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section class="" data-tools="135编辑器" data-id="93976" style="max-width: 100%;box-sizing: border-box;border-width: 0px;border-style: none;border-color: initial;overflow-wrap: break-word !important;"><section style="padding: 0.6em;max-width: 100%;box-sizing: border-box;overflow-wrap: break-word !important;"><img class="" data-ratio="0.06478405315614617" data-type="png" data-w="602" data-width="100%" src="data:image/PNG;base64,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 " src="SeWfibBcBT0EkgHxOI4eQYfxJicqqEvZuUiaZjlOkE75icZaPIvTkzQNZVJJX9gQ1IO8c5SLD8NhqjPDthOk05AjSA"  style="width: 657.813px;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;visibility: visible !important;"  /><section style="padding-right: 4px;padding-left: 4px;max-width: 100%;box-sizing: border-box;overflow-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box;box-shadow: rgb(229, 229, 229) 1px 1px 6px;border-bottom-left-radius: 15px;border-bottom-right-radius: 15px;background: rgb(254, 254, 254);overflow-wrap: break-word !important;"><section style="padding: 1em 1.4em 1em 0.6em;max-width: 100%;box-sizing: border-box;box-shadow: rgb(229, 229, 229) -1px 1px 6px;border-bottom-left-radius: 15px;border-bottom-right-radius: 15px;background: url(&quot;https://mmbiz.qpic.cn/mmbiz_png/SeWfibBcBT0EkgHxOI4eQYfxJicqqEvZuUL5tU57ElYemK3eUZS3PjXkmF5U1VRkfMXsIEAicWBULkmenfUqtjklQ/640?wx_fmt=png&quot;) 0% 100% / 40% no-repeat;overflow-wrap: break-word !important;"><section style="max-width: 100%;box-sizing: border-box;border-top: 1px solid rgb(91, 113, 126);border-right: 1px solid rgb(91, 113, 126);border-bottom-style: none;border-left-style: none;overflow-wrap: break-word !important;"><section style="margin-top: -7px;padding-top: 2px;padding-bottom: 2px;max-width: 100%;box-sizing: border-box;width: 22px;background-image: initial;background-attachment: initial;background-size: initial;background-origin: initial;background-clip: initial;background-position: initial;background-repeat: initial;overflow-wrap: break-word !important;"><img class="" data-ratio="0.7894736842105263" data-type="png" data-w="19" src="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAPBAMAAAD0aukfAAAALVBMVEUAAABVcXFccIBAgIBccIAAAABbcH9acX5gcIBbcX5bcH5ccH5ccX9Ycn1bcX4Et6rnAAAADnRSTlMACVAEQAGPYxDgqMMkMYhZovcAAABiSURBVAjXpcehDcJQAAXA+wkoKjoBYQgMHkmaOgSmExBGYJKGCVAMwCSk6puGNwPpDLg7lB3sW9bXCefcOWSijAufuXFJ7TX5olu+yQPjjG0GSio+eZ00mY9vXVKtkgz/8wfyt0d6GUt/rAAAAABJRU5ErkJggg== " src="SeWfibBcBT0EkgHxOI4eQYfxJicqqEvZuUcIRrCOQtJRiaOda1cib6zJYk2dAZhwERrJxBDwqWTiaK8AOer02qIqnSQ"  style="margin-right: auto;margin-left: auto;display: block;box-sizing: border-box !important;overflow-wrap: break-word !important;width: 12px !important;visibility: visible !important;"  /></section><section data-autoskip="1" class="" style="padding: 0.7em 0.8em 1.2em 1em;max-width: 100%;box-sizing: border-box;font-size: 14px;letter-spacing: 1.5px;line-height: 1.75em;overflow-wrap: break-word !important;"><p style="margin-bottom: 5px;padding: 5px 0.8em 5px 1em;max-width: 100%;min-height: 1em;letter-spacing: 0px;text-align: left;color: rgb(61, 61, 61);text-indent: 0em;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;在《系统调用分析(1)》<a href="http://mp.weixin.qq.com/s?__biz=MzAwMDUwNDgxOA==&amp;mid=2652665638&amp;idx=1&amp;sn=59aed1d8154d7891295388e8a6606e53&amp;chksm=810f31bbb678b8ade16d70dd4c08f669c9019d1aa7243dd3c48df35cb5ebb905f4414dcf9f9e&amp;scene=21#wechat_redirect" target="_blank" data-linktype="2">Linux内核之旅/张凯捷——系统调用分析（1）</a>中，首先介绍了系统调用的概念，并对早期通过软中断(int 80)来进行系统调用的相关过程进行了分析，最后分析和介绍了为了提高系统调用的响应执行速度的两种机制——vsyscall和vDSO。</p><p style="margin-top: 5px;margin-bottom: 5px;padding: 5px 0.8em 5px 1em;max-width: 100%;min-height: 1em;letter-spacing: 0px;text-align: left;color: rgb(61, 61, 61);text-indent: 0em;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;本篇文章将介绍和分析在指令层面上对系统调用响应速度的优化——快速系统调用指令，32位下使用的sysenter/sysexit；64位下使用的syscall/sysret，以及linux内核中为了支持这些快速系统调用指令所做的相关操作。并且在linux-4.20内核，glibc-2.23版本环境下编写了用户态系统调用程序并对程序运行追踪分析。</p></section></section><section style="margin-top: -9px;max-width: 100%;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-width="50%" style="max-width: 100%;width: 308.906px;display: inline-block;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-width="100%" style="max-width: 100%;width: 308.906px;height: 1px;background: rgb(91, 113, 126);box-sizing: border-box !important;overflow-wrap: break-word !important;"></section><section style="margin-top: -5px;padding-top: 2px;padding-bottom: 2px;max-width: 100%;box-sizing: border-box;width: 22px;background-image: initial;background-attachment: initial;background-size: initial;background-origin: initial;background-clip: initial;background-position: initial;background-repeat: initial;overflow-wrap: break-word !important;"><img class="" data-ratio="0.7894736842105263" data-type="png" data-w="19" src="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAPBAMAAAD0aukfAAAALVBMVEUAAABVcXFccIBAgIBccIAAAABbcH9acX5gcIBbcX5bcH5ccH5ccX9Ycn1bcX4Et6rnAAAADnRSTlMACVAEQAGPYxDgqMMkMYhZovcAAABiSURBVAjXpcehDcJQAAXA+wkoKjoBYQgMHkmaOgSmExBGYJKGCVAMwCSk6puGNwPpDLg7lB3sW9bXCefcOWSijAufuXFJ7TX5olu+yQPjjG0GSio+eZ00mY9vXVKtkgz/8wfyt0d6GUt/rAAAAABJRU5ErkJggg== " src="SeWfibBcBT0EkgHxOI4eQYfxJicqqEvZuUcIRrCOQtJRiaOda1cib6zJYk2dAZhwERrJxBDwqWTiaK8AOer02qIqnSQ"  style="margin-right: auto;margin-left: auto;display: block;transform: scale(-1);box-sizing: border-box !important;overflow-wrap: break-word !important;width: 13px !important;visibility: visible !important;"  /></section></section></section></section></section></section></section></section><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><section class="" data-tools="135编辑器" data-id="94072" style="max-width: 100%;box-sizing: border-box;color: rgb(0, 0, 0);text-align: start;border-width: 0px;border-style: none;border-color: initial;overflow-wrap: break-word !important;"><section style="padding-right: 0.6em;padding-bottom: 1em;padding-left: 0.6em;max-width: 100%;box-sizing: border-box;overflow-wrap: break-word !important;"><section style="max-width: 100%;font-family: -webkit-standard;font-size: 50px;font-weight: bold;display: flex;justify-content: flex-end;align-items: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section class="" data-brushtype="text" style="margin-top: -6px;max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;line-height: 20px;font-family: serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">sysenter / sysexit</span></section><section style="margin-left: 10px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">0</section><section class="" data-original-title="" title="" style="max-width: 100%;z-index: 999;box-sizing: border-box !important;overflow-wrap: break-word !important;">3</section></section><section style="margin-top: -30px;max-width: 100%;box-shadow: rgb(222, 222, 222) 0px 0px 5px;transform: rotate(0deg);background-color: rgb(254, 254, 254);box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-autoskip="1" class="" style="padding: 1em;max-width: 100%;box-sizing: border-box;font-size: 14px;text-align: justify;letter-spacing: 1.5px;line-height: 1.75em;color: rgb(63, 62, 63);overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">之前说到的</span>vsyscalls<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">和</span>vDSO<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">都是从机制上对系统调用速度进行的优化，但是使用软中断来进行系统调用需要进行特权级的切换这一根本问题没有解决。</span></span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">为了解决这一问题，</span>Intel x86 CPU<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">从</span>Pentium II (Family6, Model 3, Stepping 3)<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">之后，开始支持快速系统调用指令</span></span><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">sysenter/sysexit</span></strong></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">在《英特尔</span><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">®64</span><span style="max-width: 100%;font-size: 16px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">和</span><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">IA-32</span><span style="max-width: 100%;font-size: 16px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">架构软件开发人员手册合并卷》中可以找到</span><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">sysenter</span><span style="max-width: 100%;font-size: 16px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">指令的相关描述：</span></p><blockquote style="max-width: 100%;font-family: -webkit-standard;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;text-shadow: rgb(221, 217, 195) 2px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><em style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">Executes a fast call to a level 0 system procedure or routine. SYSENTER is a companion instruction to SYSEXIT. The instruction is optimized to provide the maximum performance for system calls from user code running at privilege level 3 to operating system or executive procedures running at privilege level 0.</span></em></span></p><p style="max-width: 100%;min-height: 1em;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;text-shadow: rgb(221, 217, 195) 2px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><em style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-shadow: rgb(221, 217, 195) 2px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;">When executed in IA-32e mode, the SYSENTER instruction transitions the logical processor to 64-bit mode; otherwise, the logical processor remains in protected mode.</span></em></span></p><p style="max-width: 100%;min-height: 1em;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;text-shadow: rgb(221, 217, 195) 2px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><em style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-shadow: rgb(221, 217, 195) 2px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;">Prior to executing the SYSENTER instruction, software must specify the privilege level 0 code segment and code entry point, and the privilege level 0 stack segment and stack pointer by writing values to the following MSRs:</span></em></span></p><p style="max-width: 100%;min-height: 1em;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;text-shadow: rgb(221, 217, 195) 2px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><em style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-shadow: rgb(221, 217, 195) 2px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;">• IA32_SYSENTER_CS (MSR address 174H) — The lower 16 bits of this MSR are the segment selector for the privilege level 0 code segment. This value is also used to determine the segment selector of the privilege level 0 stack segment (see the Operation section). This value cannot indicate a null selector.</span></em></span></p><p style="max-width: 100%;min-height: 1em;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;text-shadow: rgb(221, 217, 195) 2px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><em style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-shadow: rgb(221, 217, 195) 2px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;">• IA32_SYSENTER_EIP (MSR address 176H) — The value of this MSR is loaded into RIP (thus, this value references the first instruction of the selected operating procedure or routine). In protected mode, only bits 31:0 are loaded.</span></em></span></p><p style="max-width: 100%;min-height: 1em;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;text-shadow: rgb(221, 217, 195) 2px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><em style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-shadow: rgb(221, 217, 195) 2px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;">• IA32_SYSENTER_ESP (MSR address 175H) — The value of this MSR is loaded into RSP (thus, this value contains the stack pointer for the privilege level 0 stack). This value cannot represent a non-canonical address. In protected mode, only bits 31:0 are loaded.</span></em></span></p><p style="max-width: 100%;min-height: 1em;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;text-shadow: rgb(221, 217, 195) 2px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><em style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-shadow: rgb(221, 217, 195) 2px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;">These MSRs can be read from and written to using RDMSR/WRMSR. The WRMSR instruction ensures that the IA32_SYSENTER_EIP and IA32_SYSENTER_ESP MSRs always contain canonical addresses.</span></em></span></p></blockquote><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;font-size: 16px;text-align: left;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">主要信息有：</span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体, SimSun;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; (1)</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;">sysenter</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">与</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;">sysexit</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">指令配套，可以以比较高的执行效率在用户态执行要在系统态执行的系统调用。</span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; (2)在</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;">IA-32e</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">模式下执行时，</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;">sysenter</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">指令将逻辑处理器转换为</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;">64</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">位模式，否则逻辑处理器保持在保护模式。</span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; (3)执行</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;">sysenter</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">指令之前，需要将下列</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;">MSR</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">（</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;">Model Specific Registers)</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">中写入值来指定</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;">Ring0</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">代码段、代码入口点、</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;">Ring0</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">堆栈段和堆栈指针：</span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;- IA32_SYSENTER_CS(174H)</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">：指定要执行</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;">Ring0</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">代码的代码段选择符，也能得出目标</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;">Ring0</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">所用堆栈段的段选择符</span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;- IA32_SYSENTER_EIP(176H)</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">：指定要执行的</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;">Ring0</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">代码的起始地址</span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;- IA32_SYSENTER_ESP(175H)</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">：指定要执行的</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;">Ring0</span><span style="max-width: 100%;font-size: 16px;text-align: left;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">代码所使用的栈指针</span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-align: left;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; (4)使用</span><span style="max-width: 100%;font-size: 16px;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;">rdmsr/wrmsr</span><span style="max-width: 100%;font-size: 16px;text-align: left;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">读取和写入</span><span style="max-width: 100%;font-size: 16px;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;">MSR</span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">下面基于</span>linux-2.6.39<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">内核进行分析：</span></span></strong></p><p style="margin-left: 16px;max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-indent: 0em;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><h3 style="font-weight: bold;max-width: 100%;font-family: -webkit-standard;line-height: 34.4px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 微软雅黑;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;">3.1&nbsp;系统调用初始化</span></h3><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; 从</span>linux<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">内核启动流程入手：</span></span><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">start_kernel() -&gt; chenk_bugs() -&gt; identify_boot_cpu() -&gt; sysenter_setup() &amp; enable_sep_cpu()</span></strong></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 微软雅黑;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">3.1.1 页面初始化和映射</span></strong></span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">首先执行</span>sysenter_setup()<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">函数来支持之前提到的</span>vDSO<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">机制，</span></span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">将</span>vdso32-sysenter.so<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">动态链接库装载进</span>vsyscall<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">页中，</span></span><span style="max-width: 100%;font-size: 16px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">在</span><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">arch/x86/vdso/vdso32-setup.c</span></strong><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">可以找到</span>sysenter_setup()<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">函数：</span></span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;</p><pre data-source-line="320" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">int</span> __<span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">init <span class="" style="max-width: 100%;color: rgb(153, 0, 0);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">sysenter_setup</span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">(<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">void</span>)</span></span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">{&nbsp;&nbsp;&nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;void</span> *syscall_page = (<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">void</span> *)get_zeroed_page(GFP_ATOMIC); &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;const</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">void</span> *vsyscall; &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;size_t</span> vsyscall_len;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;vdso32_pages[<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0</span>] = virt_to_page(syscall_page);</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 153);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">#<span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">ifdef</span> CONFIG_X86_32</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;gate_vma_init();</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 153);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">#<span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">endif</span></span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">if</span> (vdso32_syscall()) {</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vsyscall = &amp;vdso32_syscall_start;</code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vsyscall_len = &amp;vdso32_syscall_end - &amp;vdso32_syscall_start;
 &nbsp; &nbsp;} <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">else</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">if</span> (vdso32_sysenter()) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vsyscall = &amp;vdso32_sysenter_start;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vsyscall_len = &amp;vdso32_sysenter_end - &amp;vdso32_sysenter_start;
 &nbsp; &nbsp;} <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">else</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vsyscall = &amp;vdso32_int80_start;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vsyscall_len = &amp;vdso32_int80_end - &amp;vdso32_int80_start;</code><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;} &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(0, 134, 179);box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;memcpy</span>(syscall_page, vsyscall, vsyscall_len);</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;relocate_vdso(syscall_page); &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0</span>;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">}</span></p></pre><p style="margin-left: 16px;max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="margin-left: 16px;max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">sysenter_setup()</span><span style="max-width: 100%;font-size: 16px;text-indent: 0em;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">函数的主要工作：</span><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="margin-left: 16px;max-width: 100%;min-height: 1em;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体, SimSun;font-size: 16px;text-indent: 56px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; (1)</span><span style="max-width: 100%;font-family: 宋体;font-size: 16px;text-indent: 56px;box-sizing: border-box !important;overflow-wrap: break-word !important;">调用</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;box-sizing: border-box !important;overflow-wrap: break-word !important;">get_zeroed_page()</span><span style="max-width: 100%;font-family: 宋体;font-size: 16px;text-indent: 56px;box-sizing: border-box !important;overflow-wrap: break-word !important;">获得一个被填充为</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;box-sizing: border-box !important;overflow-wrap: break-word !important;">0</span><span style="max-width: 100%;font-family: 宋体;font-size: 16px;text-indent: 56px;box-sizing: border-box !important;overflow-wrap: break-word !important;">的物理页，返回该页在内核地址空间的线性地址。</span></p><p style="margin-left: 16px;max-width: 100%;min-height: 1em;text-indent: 0em;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-indent: 56px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; (2)调用宏</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;box-sizing: border-box !important;overflow-wrap: break-word !important;">virt_to_page</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">得到</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;box-sizing: border-box !important;overflow-wrap: break-word !important;">syscall_page</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">地址对应的</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;box-sizing: border-box !important;overflow-wrap: break-word !important;">page</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">管理结构地址并赋值给</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;box-sizing: border-box !important;overflow-wrap: break-word !important;">vdso32_page[0]</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">。</span></p><p style="margin-left: 16px;max-width: 100%;min-height: 1em;text-indent: 0em;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-indent: 56px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; (3)随后判断支持哪些指令，从而做不同处理，可以看到优先级是</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;box-sizing: border-box !important;overflow-wrap: break-word !important;">syscall &gt; sysenter &gt; int80</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">。</span></p><p style="margin-left: 16px;max-width: 100%;min-height: 1em;text-indent: 0em;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-indent: 56px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; (4)将</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;box-sizing: border-box !important;overflow-wrap: break-word !important;">vdso32_sysenter_start</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">地址赋给</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;box-sizing: border-box !important;overflow-wrap: break-word !important;">vsyscall</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">，然后用</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;box-sizing: border-box !important;overflow-wrap: break-word !important;">memcpy()</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">将</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;box-sizing: border-box !important;overflow-wrap: break-word !important;">vsyscall</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">拷贝到对应的页，最后用</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;box-sizing: border-box !important;overflow-wrap: break-word !important;">relocate_vdso()</span><span style="max-width: 100%;font-size: 16px;text-indent: 56px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">进行重定向。</span></p><p style="max-width: 100%;min-height: 1em;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;text-indent: 0em;font-size: 16px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">在</span><strong style="max-width: 100%;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">arch/x86/vdso/vdso32.S</span></strong><span style="max-width: 100%;text-indent: 0em;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">中可以看到</span>vdso32_sysenter_start<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">就是</span>vdso32-sysenter.so:</span><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><pre data-source-line="320" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">vdso32_sysenter_start:</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;incbin "arch/x86/vdso/vdso32-sysenter.so"</span></code></p></pre><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; 即将</span>vdso32-sysenter.so<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">拷贝到对应的页中，在《系统调用分析(1)》的</span>vDSO<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">介绍中提到的</span></span><strong style="max-width: 100%;font-family: 微软雅黑, Arial, sans-serif;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">arch_setup_additional_pages</span></strong><span style="max-width: 100%;font-size: 16px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">函数便是把拷贝到的页的内容映射到用户空间。</span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 微软雅黑;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">3.1.2 相关MSR寄存器的初始化</strong></span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; 在</span><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">arch/x86/vdso/vdso32-setup.c</span></strong><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">中的</span>enable_sep_cpu()<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">函数完成相关</span>MSR<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">寄存器的初始化：</span></span></p><pre data-source-line="365" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">void</span> <span class="" style="max-width: 100%;color: rgb(153, 0, 0);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">enable_sep_cpu</span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">(<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">void</span>)</span></span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">{ &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;int</span> cpu = get_cpu(); &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;struct</span> <span class="" style="max-width: 100%;color: rgb(68, 85, 136);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">tss_struct</span> *<span class="" style="max-width: 100%;color: rgb(68, 85, 136);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">tss</span> = &amp;<span class="" style="max-width: 100%;color: rgb(68, 85, 136);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">per_cpu</span>(<span class="" style="max-width: 100%;color: rgb(68, 85, 136);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">init_tss</span>, <span class="" style="max-width: 100%;color: rgb(68, 85, 136);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">cpu</span>);</span></code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;
 &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">if</span> (!boot_cpu_has(X86_FEATURE_SEP)) {
 &nbsp; &nbsp; &nbsp; &nbsp;put_cpu();
 &nbsp; &nbsp; &nbsp; &nbsp;eturn;
 &nbsp; &nbsp;}

 &nbsp; &nbsp;tss-&gt;x86_tss.ss1 = __KERNEL_CS;
 &nbsp; &nbsp;tss-&gt;x86_tss.sp1 = <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">sizeof</span>(struct tss_struct) + (<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">unsigned</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">long</span>) tss;
 &nbsp; &nbsp;wrmsr(MSR_IA32_SYSENTER_CS, __KERNEL_CS, <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0</span>);
 &nbsp; &nbsp;wrmsr(MSR_IA32_SYSENTER_ESP, tss-&gt;x86_tss.sp1, <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0</span>);
 &nbsp; &nbsp;wrmsr(MSR_IA32_SYSENTER_EIP, (<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">unsigned</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">long</span>) ia32_sysenter_target, <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0</span>);
 &nbsp; &nbsp;put_cpu();
}</code></pre><p style="max-width: 100%;min-height: 1em;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;font-size: 16px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">主要内容：</span></p><p style="max-width: 100%;min-height: 1em;text-indent: 0em;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体, SimSun;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;(1)</span><span class="Apple-converted-space">&nbsp;</span>MSR_IA32_SYSENTER_*<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">的声明在</span></span><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">arch/x86/include/asm/msr-index.h</span></strong><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">中，可以看到对应的</span>MSR<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">寄存器地址：</span></span></p><pre data-source-line="365" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">#define MSR_IA32_SYSENTER_CS &nbsp; &nbsp; 0x00000174</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">#define MSR_IA32)SYSENTER_ESP &nbsp; &nbsp;0x00000175</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">#define MSR_IA32_SYSENTER_EIP &nbsp; &nbsp;0x00000176 &nbsp; &nbsp;</code></p></pre><p style="margin-left: 16px;max-width: 100%;min-height: 1em;text-indent: 0em;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;text-indent: 0em;font-family: 宋体, SimSun;box-sizing: border-box !important;overflow-wrap: break-word !important;">(2)</span><span style="max-width: 100%;text-indent: 0em;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">将</span>__KERNEL_CS<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">设置到</span>MSR_IA_SYSENTER_CS<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">中。</span></span></p><p style="margin-left: 16px;max-width: 100%;min-height: 1em;text-indent: 0em;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;text-indent: 0em;font-family: 宋体, SimSun;box-sizing: border-box !important;overflow-wrap: break-word !important;">(3)</span><span style="max-width: 100%;text-indent: 0em;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">将</span>tss-&gt;x86_tss.sp1<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">栈地址设置到</span>MSR_IA32_SYSENTER_ESP<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">中。</span></span></p><p style="margin-left: 16px;max-width: 100%;min-height: 1em;text-indent: 0em;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;text-indent: 0em;font-family: 宋体, SimSun;box-sizing: border-box !important;overflow-wrap: break-word !important;">(4)</span><span style="max-width: 100%;text-indent: 0em;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">将</span>ia32_sysenter_target(sysenter<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">指令的接口函数</span>)<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">设置到</span>MSR_IA32_SYSENTER_EIP<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">。</span></span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;">3.2 sysenter和sysexit的指令操作</span></strong></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">在</span>Ring3<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">的代码调用</span>sysenter<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">指令之后，</span>CPU<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">做出如下操作：</span></span></strong></p><ol class=" list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">将</span>SYSENTER_CS_MSR<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">的值装在到</span>cs<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">寄存器。</span></span></p></li><li><p style="max-width: 100%;min-height: 1em;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">将</span>SYSENTER_EIP_MSR<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">的值装在到</span>eip<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">寄存器。</span></span></p></li><li><p style="max-width: 100%;min-height: 1em;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">将</span>SYSENTER_CS_MSR<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">的值加</span>8(Ring0<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">的堆栈段描述符</span>)<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">装载到</span>ss<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">寄存器。</span></span></p></li><li><p style="max-width: 100%;min-height: 1em;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">将</span>SYSENTER_ESP_MSR<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">的值装载到</span>esp<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">寄存器。</span></span></p></li><li><p style="max-width: 100%;min-height: 1em;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">将特权级切换到</span>Ring0<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">。</span></span></p></li><li><p style="max-width: 100%;min-height: 1em;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">如果</span>EFLAGS<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">寄存器的</span>VM<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">标志被置位，则清除该标志。</span></span></p></li><li><p style="max-width: 100%;min-height: 1em;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">开始执行指定的</span>Ring0<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">代码。</span></span></p></li></ol><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">在</span>Ring0<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">代码执行完毕，调用</span>sysexit<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">指令退回</span>Ring3<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">时，</span>CPU<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">会做出如下操作：</span></span></strong></p><ol class=" list-paddingleft-2" style=""><li><p style="max-width: 100%;min-height: 1em;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">将</span>SYSENTER_CS_MSR<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">的值加</span>16(Ring3<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">的代码段描述符</span>)<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">装载到</span>cs<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">寄存器。</span></span></p></li><li><p style="max-width: 100%;min-height: 1em;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">将寄存器</span>edx<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">的值装载到</span>eip<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">寄存器。</span></span></p></li><li><p style="max-width: 100%;min-height: 1em;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">将</span>SYSENTER_CS_MSR<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">的值加</span>24(Ring3<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">的堆栈段描述符</span>)<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">装载到</span>ss<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">寄存器。</span></span></p></li><li><p style="max-width: 100%;min-height: 1em;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">将寄存器</span>ecx<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">的值装载到</span>esp<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">寄存器。</span></span></p></li><li><p style="max-width: 100%;min-height: 1em;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">将特权级切换到</span>Ring3<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">。</span></span></p></li><li><p style="max-width: 100%;min-height: 1em;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">继续执行</span>Ring3<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">的代码。</span></span></p></li></ol><p style="max-width: 100%;min-height: 1em;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><h3 style="font-weight: bold;max-width: 100%;line-height: 1.6em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">3.3 sysenter的系统调用处理</strong></span></h3><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">3.3.1 linux2.6.39内核sysenter系统调用</span></strong></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">正如刚才对</span>IA32_SYSENTER_EIP<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">寄存器中传入</span>sysenter<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">的系统调用函数入口地址</span>ia32_sysenter_target<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">。</span></span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; 在</span><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">arch/x86/ia32/ia32entry.S</span></strong><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">中可以看到</span>sysenter<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">指令所要执行的系统调用处理程序</span>ia32_sysenter_target<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">的代码，其中执行系统调用的代码是：</span></span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><pre data-source-line="418" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">sysenter_dispatch</span>: &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;call</span> &nbsp; &nbsp;*<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">ia32_sys_call_table</span>(,%<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">rax</span>,8)</code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;</code><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">...</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">ia32_sys_call_table</span>: &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;.quad</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">sys_restart_syscall</span></code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;<span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">.quad</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">sys_exit</span>
 &nbsp; &nbsp;<span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">.quad</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">stub32_fork</span>
 &nbsp; &nbsp;<span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">.quad</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">sys_read</span>
 &nbsp; &nbsp;<span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">.quad</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">sys_write</span>
 &nbsp; &nbsp;<span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">.quad</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">compat_sys_open</span> &nbsp; &nbsp; &nbsp; <span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">/* 5 */</span></code></pre><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">可以看到</span><span style="max-width: 100%;font-size: 16px;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;">sysenter</span><span style="max-width: 100%;font-size: 16px;text-indent: 28px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">指令会直接到系统调用表中找到相应系统调用处理程序去执行。</span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><h4 style="font-weight: bold;max-width: 100%;line-height: 1.6em;box-sizing: border-box !important;overflow-wrap: break-word !important;">3.3.2 linux4.20内核sysenter系统调用</h4><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">在</span>linux4.20<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">内核中，对</span>IA32_SYSENTER_EIP<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">寄存器中传入的是</span>entry_SYSENTER_32<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">函数。</span></span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; 在</span><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">arch/x86/entry/entry_32.S</span></strong><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">中可以看到</span>entry_SYSENTER_32()<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">函数：</span></span></p><pre data-source-line="438" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">ENTRY(entry_SYSENTER_32)
 &nbsp; &nbsp;pushfl
 &nbsp; &nbsp;pushl &nbsp; %eax
 &nbsp; &nbsp;BUG_IF_WRONG_CR3 no_user_check=<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">1</span>
 &nbsp; &nbsp;SWITCH_TO_KERNEL_CR3 scratch_reg=%eax
 &nbsp; &nbsp;popl &nbsp; &nbsp;%eax
 &nbsp; &nbsp;popfl
 &nbsp; &nbsp;movl &nbsp; &nbsp;TSS_entry2task_stack(%esp), %esp
 &nbsp; &nbsp;
.Lsysenter_past_esp:
 &nbsp; &nbsp;pushl &nbsp; $__USER_DS &nbsp; &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">/* pt_regs-&gt;ss */</span>
 &nbsp; &nbsp;pushl &nbsp; %ebp &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">/* pt_regs-&gt;sp (stashed in bp) */</span>
 &nbsp; &nbsp;pushfl &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">/* pt_regs-&gt;flags (except IF = 0) */</span>
 &nbsp; &nbsp;orl $X86_EFLAGS_IF, (%esp) &nbsp;<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">/* Fix IF */</span>
 &nbsp; &nbsp;pushl &nbsp; $__USER_CS &nbsp; &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">/* pt_regs-&gt;cs */</span>
 &nbsp; &nbsp;pushl &nbsp; $0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">/* pt_regs-&gt;ip = 0 (placeholder) */</span>
 &nbsp; &nbsp;pushl &nbsp; %eax &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">/* pt_regs-&gt;orig_ax */</span>
 &nbsp; &nbsp;SAVE_ALL pt_regs_ax=$-ENOSYS &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">/* save rest, stack already switched */</span>
 &nbsp; &nbsp;testl &nbsp; $X86_EFLAGS_NT|X86_EFLAGS_AC|X86_EFLAGS_TF, PT_EFLAGS(%esp)
 &nbsp; &nbsp;jnz .Lsysenter_fix_flags
 &nbsp; &nbsp;
.Lsysenter_flags_fixed:
 &nbsp; &nbsp;TRACE_IRQS_OFF
 &nbsp; &nbsp;movl &nbsp; &nbsp;%esp, %eax
 &nbsp; &nbsp;call &nbsp; &nbsp;do_fast_syscall_32
...
 &nbsp; &nbsp;sysexit
...</code></pre><p style="max-width: 100%;min-height: 1em;text-indent: 0em;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">entry_SYSENTER_32()</span><span style="max-width: 100%;font-size: 16px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">函数主要工作：</span></p><p style="max-width: 100%;min-height: 1em;text-indent: 0em;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;text-indent: 0em;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; (1)之前说到</span>sysenter<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">指令会将</span>SYSENTER_ESP_MSR<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">的值装载到</span>esp<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">寄存器，但是里面保存的是</span>sysenter_stack<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">的地址，所以通过</span>movl &nbsp;&nbsp;&nbsp;TSS_entry2task_stack(%esp), %esp<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">语句，修正</span>esp<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">寄存器保存进程的内核栈。</span></span></p><p style="max-width: 100%;min-height: 1em;text-indent: 0em;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-indent: 0em;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; (2)</span><span style="max-width: 100%;font-size: 16px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">SAVE_ALL</span><span style="max-width: 100%;font-size: 16px;text-indent: 0em;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">和</span><span style="max-width: 100%;font-size: 16px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">pushl</span><span style="max-width: 100%;font-size: 16px;text-indent: 0em;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">等操作将相关寄存器压栈，保存现场。</span></p><p style="max-width: 100%;min-height: 1em;text-indent: 0em;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-indent: 0em;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; (3)调用</span><span style="max-width: 100%;font-size: 16px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">do_fast_syscall_32 -&gt; do_syscall_32_irqs_on()<span class="Apple-converted-space">&nbsp;</span></span><span style="max-width: 100%;font-size: 16px;text-indent: 0em;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">从系统调用表中找到相应处理函数进行调用。</span></p><p style="max-width: 100%;min-height: 1em;text-indent: 0em;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-indent: 0em;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; (4)最后</span><span style="max-width: 100%;font-size: 16px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">popl</span><span style="max-width: 100%;font-size: 16px;text-indent: 0em;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">相关寄存器返回现场，调用</span><span style="max-width: 100%;font-size: 16px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">sysexit</span><span style="max-width: 100%;font-size: 16px;text-indent: 0em;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">指令返回。</span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p></section></section></section></section><section class="" data-role="paragraph" style="max-width: 100%;box-sizing: border-box;border-width: 0px;border-style: none;border-color: initial;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p></section><section data-role="paragraph" class="" style="max-width: 100%;box-sizing: border-box;border-width: 0px;border-style: none;border-color: initial;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p></section><section data-role="paragraph" class="" style="max-width: 100%;box-sizing: border-box;border-width: 0px;border-style: none;border-color: initial;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p></section><section class="" data-tools="135编辑器" data-id="94072" style="max-width: 100%;box-sizing: border-box;color: rgb(0, 0, 0);text-align: start;border-width: 0px;border-style: none;border-color: initial;overflow-wrap: break-word !important;"><section style="padding-right: 0.6em;padding-bottom: 1em;padding-left: 0.6em;max-width: 100%;box-sizing: border-box;overflow-wrap: break-word !important;"><section style="max-width: 100%;font-size: 50px;font-weight: bold;display: flex;justify-content: flex-end;align-items: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section class="" data-brushtype="text" style="margin-top: -6px;max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: serif;box-sizing: border-box !important;overflow-wrap: break-word !important;">syscall / sysret</span></section><section style="margin-left: 10px;max-width: 100%;font-family: -webkit-standard;box-sizing: border-box !important;overflow-wrap: break-word !important;">0</section><section class="" data-original-title="" title="" style="max-width: 100%;font-family: -webkit-standard;z-index: 999;box-sizing: border-box !important;overflow-wrap: break-word !important;">4</section></section><section style="margin-top: -30px;max-width: 100%;box-shadow: rgb(222, 222, 222) 0px 0px 5px;transform: rotate(0deg);background-color: rgb(254, 254, 254);box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-autoskip="1" class="" style="padding: 1em;max-width: 100%;box-sizing: border-box;text-align: justify;letter-spacing: 1.5px;line-height: 1.75em;color: rgb(63, 62, 63);overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;font-size: 14px;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; 在</span>32<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">位下</span>Intel<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">提出快速系统调用指令</span>sysenter/sysexit<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">，</span>AMD<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">提出</span>syscall/sysret<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">，到</span>64<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">位时统一使用</span>syscall<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">指令。</span></span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;font-size: 14px;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; 在《英特尔</span>®64<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">和</span>IA-32<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">架构软件开发人员手册合并卷》可以找到</span>syscall<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">指令的相关信息：</span></span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img class="" data-ratio="0.14209115281501342" data-type="png" data-w="746" src="data:image/PNG;base64,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 " src="SeWfibBcBT0EkgHxOI4eQYfxJicqqEvZuUONmg69ZDOW3vlA8HnWYklZWsL5kuCnwWSdEb88kHyW2cJQG286MsibQ"  style="box-sizing: border-box !important;overflow-wrap: break-word !important;width: 677px !important;visibility: visible !important;"  /></span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;font-size: 14px;text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">图</span><span class="Apple-converted-space">&nbsp;</span>4-1 syscall<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">指令图</span></span></p><blockquote style="max-width: 100%;font-family: -webkit-standard;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><em style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-shadow: rgb(221, 217, 195) 2px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;">SYSCALL invokes an OS system-call handler at privilege level 0. It does so by loading RIP from the IA32_LSTAR MSR (after saving the address of the instruction following SYSCALL into RCX). (The WRMSR instruction ensures that the IA32_LSTAR MSR always contain a canonical address.)</span></em></p><p style="max-width: 100%;min-height: 1em;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><em style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-shadow: rgb(221, 217, 195) 2px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;">SYSCALL also saves RFLAGS into R11 and then masks RFLAGS using the IA32_FMASK MSR (MSR address C0000084H); specifically, the processor clears in RFLAGS every bit corresponding to a bit that is set in the IA32_FMASK MSR.</span></em></p><p style="max-width: 100%;min-height: 1em;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><em style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-shadow: rgb(221, 217, 195) 2px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;">SYSCALL loads the CS and SS selectors with values derived from bits 47:32 of the IA32_STAR MSR. However, the CS and SS descriptor caches are not loaded from the descriptors (in GDT or LDT) referenced by those selectors. Instead, the descriptor caches are loaded with fixed values. See the Operation section for details. It is the responsibility of OS software to ensure that the descriptors (in GDT or LDT) referenced by those selector values correspond to the fixed values loaded into the descriptor caches; the SYSCALL instruction does not ensure this correspondence.</span></em></p><p style="max-width: 100%;min-height: 1em;text-indent: 28px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><em style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;text-shadow: rgb(221, 217, 195) 2px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;">The SYSCALL instruction does not save the stack pointer (RSP). If the OS system-call handler will change the stack pointer, it is the responsibility of software to save the previous value of the stack pointer. This might be done prior to executing SYSCALL, with software restoring the stack pointer with the instruction following SYSCALL (which will be executed after SYSRET). Alternatively, the OS system-call handler may save the stack pointer and restore it before executing SYSRET.</span></em></p></blockquote><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 微软雅黑;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;">4.1 系统调用追踪</span></strong></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;font-size: 14px;line-height: 1.5em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体, SimSun;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; 基于<strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">linux-4.20内核,glibc-2.23版本</strong>，</span><span style="max-width: 100%;font-family: 宋体, SimSun;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">编写用户态程序进行系统调用，使用</span><span style="max-width: 100%;font-family: 宋体, SimSun;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">gdb</span><span style="max-width: 100%;font-family: 宋体, SimSun;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">追踪运行调用过程</span><span style="max-width: 100%;font-family: 宋体, SimSun;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">,<span class="Apple-converted-space">&nbsp;</span></span><span style="max-width: 100%;font-family: 宋体, SimSun;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">分析过程如下：</span></p><p style="max-width: 100%;min-height: 1em;font-family: -webkit-standard;font-size: 14px;line-height: 1.5em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; (1)编写包含系统调用的程序：</span></p><pre data-source-line="493" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 153);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">#<span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">include</span> <span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&lt;fcntl.h&gt;</span></span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 153);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">#<span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">include</span> <span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&lt;unistd.h&gt;</span></span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 153);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">#<span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">include</span> <span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&lt;sys/types.h&gt;</span></span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 153);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">#<span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">include</span> <span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&lt;sys/stat.h&gt;</span></span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(0, 134, 179);box-sizing: border-box !important;overflow-wrap: break-word !important;">int</span> main(void)</code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">{
 &nbsp; &nbsp;pid_t ret<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">;</span>
 &nbsp; &nbsp;ret = open(<span class="" style="max-width: 100%;color: rgb(221, 17, 68);box-sizing: border-box !important;overflow-wrap: break-word !important;">"./1.txt"</span>, O_RDWR)<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">;</span></code><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;close(ret)<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">;</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">}</code></p></pre><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; (2)编译生成可执行文件：</span></p><pre data-source-line="507" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">$ gcc -o <span class="" style="max-width: 100%;color: rgb(0, 134, 179);box-sizing: border-box !important;overflow-wrap: break-word !important;">open</span> -g -<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">static</span> <span class="" style="max-width: 100%;color: rgb(0, 134, 179);box-sizing: border-box !important;overflow-wrap: break-word !important;">open</span>.c
$ file <span class="" style="max-width: 100%;color: rgb(0, 134, 179);box-sizing: border-box !important;overflow-wrap: break-word !important;">open</span><span class="" style="max-width: 100%;color: rgb(0, 134, 179);box-sizing: border-box !important;overflow-wrap: break-word !important;">open</span>: ELF <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">64</span>-<span class="" style="max-width: 100%;color: rgb(0, 134, 179);box-sizing: border-box !important;overflow-wrap: break-word !important;">bit</span> LSB executable, x86<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">-64</span>, version <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">1</span> (GNU/Linux), statically linked, <span class="" style="max-width: 100%;color: rgb(0, 134, 179);box-sizing: border-box !important;overflow-wrap: break-word !important;">for</span> GNU/Linux <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">2.6</span><span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">.32</span>, BuildID[sha1]=c7781966fa4acbecf2b489a3eea145912f3f81d0, <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">not</span> stripped</code></pre><p style="margin-left: 28px;max-width: 100%;min-height: 1em;line-height: 20px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体, SimSun;box-sizing: border-box !important;overflow-wrap: break-word !important;">(3)</span>gdb<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">调试跟踪：</span></p><pre data-source-line="513" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">(gdb) disas main</code><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">Dump of assembler code for function main: &nbsp; </code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x00000000004009ae</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0</span>&gt;: &nbsp; &nbsp; <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">push</span> &nbsp; %rbp</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x00000000004009af</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &lt;+</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">1</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&gt;: &nbsp; &nbsp; </span><span class="" style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;font-weight: bold;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">mov</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;%rsp,%rbp &nbsp; </span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x00000000004009b2</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &lt;+</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">4</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&gt;: &nbsp; &nbsp; </span><span class="" style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;font-weight: bold;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">sub</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">$0</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">x10,%rsp &nbsp; </span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x00000000004009b6</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &lt;+</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">8</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&gt;: &nbsp; &nbsp; </span><span class="" style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;font-weight: bold;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">mov</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">$0</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">x2,%esi &nbsp; </span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x00000000004009bb</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &lt;+</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">13</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&gt;: &nbsp; &nbsp;</span><span class="" style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;font-weight: bold;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">mov</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">$0</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">x4a0ec4,%edi &nbsp; </span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x00000000004009c0</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &lt;+</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">18</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&gt;: &nbsp; &nbsp;</span><span class="" style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;font-weight: bold;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">mov</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">$0</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">x0,%eax &nbsp; </span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x00000000004009c5</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &lt;+</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">23</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&gt;: &nbsp; &nbsp;callq &nbsp;</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">0x43f130</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &lt;open64&gt; &nbsp; </span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x00000000004009ca</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &lt;+</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">28</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&gt;: &nbsp; &nbsp;</span><span class="" style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;font-weight: bold;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">mov</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;%eax,-</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">0x4</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">(%rbp) &nbsp; </span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x00000000004009cd</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &lt;+</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">31</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&gt;: &nbsp; &nbsp;</span><span class="" style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;font-weight: bold;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">mov</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;-</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">0x4</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">(%rbp),%eax &nbsp; </span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x00000000004009d0</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &lt;+</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">34</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&gt;: &nbsp; &nbsp;</span><span class="" style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;font-weight: bold;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">mov</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;%eax,%edi &nbsp; </span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x00000000004009d2</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &lt;+</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">36</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&gt;: &nbsp; &nbsp;callq &nbsp;</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">0x43f3e0</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &lt;close&gt; &nbsp; </span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x00000000004009d7</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &lt;+</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">41</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&gt;: &nbsp; &nbsp;</span><span class="" style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;font-weight: bold;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">mov</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">$0</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">x0,%eax &nbsp; </span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x00000000004009dc</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &lt;+</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">46</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&gt;: &nbsp; &nbsp;leaveq &nbsp; </span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x00000000004009dd</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &lt;+</span><span class="" style="max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;color: rgb(0, 128, 128);background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">47</span><span style="max-width: 100%;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">&gt;: &nbsp; &nbsp;retq</span></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">End of assembler dump.</code><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">(gdb) disas <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0x43f130</span>Dump of assembler code for function open64: &nbsp; </code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x000000000043f130</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0</span>&gt;: &nbsp; &nbsp; cmpl &nbsp; <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">$0</span>x0,<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0x28e085</span>(%rip) &nbsp; &nbsp; &nbsp; &nbsp;# <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0x6cd1bc</span> &lt;__libc_multiple_threads&gt; &nbsp; </code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x000000000043f137</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">7</span>&gt;: &nbsp; &nbsp; <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">jne</span> &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0x43f14d</span> &lt;open64+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">29</span>&gt; &nbsp; </code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x000000000043f139</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0</span>&gt;: &nbsp; &nbsp; <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">mov</span> &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">$0</span>x2,%eax &nbsp; </code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x000000000043f13e</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">5</span>&gt;: &nbsp; &nbsp; <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">syscall</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x000000000043f140</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">7</span>&gt;: &nbsp; &nbsp; <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">cmp</span> &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">$0</span>xfffffffffffff001,%rax &nbsp; </code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x000000000043f146</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">13</span>&gt;: &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">jae</span> &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0x4441c0</span> &lt;__syscall_error&gt; &nbsp; </code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x000000000043f14c</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">19</span>&gt;: &nbsp; &nbsp;retq &nbsp; </code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x000000000043f14d</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">29</span>&gt;: &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">sub</span> &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">$0</span>x8,%rsp &nbsp; </code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x000000000043f151</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">33</span>&gt;: &nbsp; &nbsp;callq &nbsp;<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0x442690</span> &lt;__libc_enable_asynccancel&gt; &nbsp; </code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x000000000043f156</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">38</span>&gt;: &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">mov</span> &nbsp; &nbsp;%rax,(%rsp) &nbsp; </code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x000000000043f15a</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">42</span>&gt;: &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">mov</span> &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">$0</span>x2,%eax &nbsp; </code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x000000000043f15f</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">47</span>&gt;: &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">syscall</span></code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;0x000000000043f161</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">49</span>&gt;: &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">mov</span> &nbsp; &nbsp;(%rsp),%rdi &nbsp; <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0x000000000043f165</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">53</span>&gt;: &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">mov</span> &nbsp; &nbsp;%rax,%rdx &nbsp; <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0x000000000043f168</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">56</span>&gt;: &nbsp; &nbsp;callq &nbsp;<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0x4426f0</span> &lt;__libc_disable_asynccancel&gt; &nbsp; <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0x000000000043f16d</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">61</span>&gt;: &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">mov</span> &nbsp; &nbsp;%rdx,%rax &nbsp; <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0x000000000043f170</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">64</span>&gt;: &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">add</span> &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">$0</span>x8,%rsp &nbsp; <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0x000000000043f174</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">68</span>&gt;: &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">cmp</span> &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">$0</span>xfffffffffffff001,%rax &nbsp; <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0x000000000043f17a</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">74</span>&gt;: &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">jae</span> &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0x4441c0</span> &lt;__syscall_error&gt; &nbsp; <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0x000000000043f180</span> &lt;+<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">80</span>&gt;: &nbsp; &nbsp;retq
End of assembler dump.</code></pre><p style="margin-left: 28px;max-width: 100%;min-height: 1em;line-height: 20px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;text-indent: 0em;font-family: 宋体, SimSun;box-sizing: border-box !important;overflow-wrap: break-word !important;">(4)可以看到系统调用</span><span style="max-width: 100%;text-indent: 0em;font-family: 宋体, SimSun;box-sizing: border-box !important;overflow-wrap: break-word !important;">open</span><span style="max-width: 100%;text-indent: 0em;font-family: 宋体, SimSun;box-sizing: border-box !important;overflow-wrap: break-word !important;">要执行的是</span><span style="max-width: 100%;text-indent: 0em;font-family: 宋体, SimSun;box-sizing: border-box !important;overflow-wrap: break-word !important;">&lt;open64+29&gt;, open64</span><span style="max-width: 100%;text-indent: 0em;font-family: 宋体, SimSun;box-sizing: border-box !important;overflow-wrap: break-word !important;">定义在</span><span style="max-width: 100%;text-indent: 0em;font-family: 宋体, SimSun;box-sizing: border-box !important;overflow-wrap: break-word !important;">glibc</span><span style="max-width: 100%;text-indent: 0em;font-family: 宋体, SimSun;box-sizing: border-box !important;overflow-wrap: break-word !important;">源码路</span><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="margin-left: 28px;max-width: 100%;min-height: 1em;line-height: 20px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体, SimSun;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">径</span><strong style="max-width: 100%;font-family: 宋体, SimSun;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">sysdeps/posix/open64.c</strong><span style="max-width: 100%;font-family: 宋体, SimSun;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">中:</span></p><pre data-source-line="558" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 153);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">#<span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">include</span> <span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&lt;fcntl.h&gt;</span></span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 153);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">#<span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">include</span> <span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&lt;stdarg.h&gt;</span></span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 153);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">#<span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">include</span> <span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&lt;sysdep-cancel.h&gt;</span></span></code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> <span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">/* Open FILE with access OFLAG. &nbsp;If O_CREAT or O_TMPFILE is in OFLAG,</span></code><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">a third argument is the file protection. &nbsp;*/</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">int</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">__libc_open64 (<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">const</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">char</span> *file, <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">int</span> oflag, ...)</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">{ &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;int</span> mode = <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0</span>; &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;if</span> (__OPEN_NEEDS_MODE (oflag))</code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;{
 &nbsp; &nbsp; &nbsp; &nbsp;va_list arg;
 &nbsp; &nbsp; &nbsp; &nbsp;va_start (arg, oflag);
 &nbsp; &nbsp; &nbsp; &nbsp;mode = va_arg (arg, <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">int</span>);
 &nbsp; &nbsp; &nbsp; &nbsp;va_end (arg);</code><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;} &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;if</span> (SINGLE_THREAD_P) &nbsp; &nbsp; &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return</span> __libc_open (file, oflag | O_LARGEFILE, mode); &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;int</span> oldtype = LIBC_CANCEL_ASYNC (); &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;int</span> result = __libc_open (file, oflag | O_LARGEFILE, mode);</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;LIBC_CANCEL_RESET (oldtype); &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;return</span> result;</code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">}
weak_alias (__libc_open64, __open64)
libc_hidden_weak (__open64)
weak_alias (__libc_open64, open64)</code></pre><p style="margin-left: 28px;max-width: 100%;min-height: 1em;line-height: 20px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;text-align: left;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">(5)看到其实是执行__lib_open，__libc_open定义在glibc源码路径sysdeps/unix/sysv/linux/generic/open.c：</span></p><pre data-source-line="594" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">int</span>__libc_open (<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">const</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">char</span> *file, <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">int</span> oflag, ...)</code><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">{ &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;int</span> mode = <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0</span>; &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;if</span> (__OPEN_NEEDS_MODE (oflag))</code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;{
 &nbsp; &nbsp; &nbsp; &nbsp;va_list arg;
 &nbsp; &nbsp; &nbsp; &nbsp;va_start (arg, oflag);
 &nbsp; &nbsp; &nbsp; &nbsp;mode = va_arg (arg, <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">int</span>);
 &nbsp; &nbsp; &nbsp; &nbsp;va_end (arg);
 &nbsp; &nbsp;} &nbsp; &nbsp;
 &nbsp; &nbsp;<span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">return</span> <span class="" style="max-width: 100%;color: rgb(153, 0, 0);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">SYSCALL_CANCEL</span> <span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">(openat, AT_FDCWD, file, oflag, mode)</span></span>;
}</code></pre><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;(6)最后执行到SYSCALL_CANCEL宏，glibc源码路径sysdeps/unix/sysdep.h里有着SYSCALL_CANCEL宏定义：</span></p><pre data-source-line="613" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">#define __SYSCALL4(name, a1, a2, a3, a4, a5) \</span></code><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> INLINE_SYSCALL (name, <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">4</span>, <span class="" style="max-width: 100%;color: rgb(0, 134, 179);box-sizing: border-box !important;overflow-wrap: break-word !important;">a1</span>, <span class="" style="max-width: 100%;color: rgb(0, 134, 179);box-sizing: border-box !important;overflow-wrap: break-word !important;">a2</span>, <span class="" style="max-width: 100%;color: rgb(0, 134, 179);box-sizing: border-box !important;overflow-wrap: break-word !important;">a3</span>, <span class="" style="max-width: 100%;color: rgb(0, 134, 179);box-sizing: border-box !important;overflow-wrap: break-word !important;">a4</span>, <span class="" style="max-width: 100%;color: rgb(0, 134, 179);box-sizing: border-box !important;overflow-wrap: break-word !important;">a5</span>)</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">#define __SYSCALL_NARGS_X(a,b,c,d,e,f,g,h,n,...) n</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">#define __SYSCALL_NARGS(...) \</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;__SYSCALL_NARGS_X (__VA_ARGS__,<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">7</span>,<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">6</span>,<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">5</span>,<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">4</span>,<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">3</span>,<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">2</span>,<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">1</span>,<span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0</span>,)</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">#define __SYSCALL_CONCAT_X(a,b) &nbsp; &nbsp; a##b</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">#define __SYSCALL_CONCAT(a,b) &nbsp; &nbsp; &nbsp; __SYSCALL_CONCAT_X (a, b)</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">#define __SYSCALL_DISP(b,...) \</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;__SYSCALL_CONCAT (<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">b,__SYSCALL_NARGS(__VA_ARGS__))(__VA_ARGS__)</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">#define __SYSCALL_CALL(...) __SYSCALL_DISP (__SYSCALL, __VA_ARGS__)</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">#define SYSCALL_CANCEL(...) \</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">({ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \</code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;long int <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">sc_ret; </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\</code><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;if (SINGLE_THREAD_P) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \ &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;sc_ret </span>= __SYSCALL_CALL (__VA_ARGS__)<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \</span></code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;else &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \
 &nbsp; &nbsp;{ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\
 &nbsp; &nbsp; &nbsp; &nbsp;int <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">sc_cancel_oldtype </span>= LIBC_CANCEL_ASYNC ()<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">; &nbsp; &nbsp; &nbsp; &nbsp; \</span>
 &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">sc_ret </span>= __SYSCALL_CALL (__VA_ARGS__)<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\</span>
 &nbsp; &nbsp; &nbsp; &nbsp;LIBC_CANCEL_RESET (<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">sc_cancel_oldtype); </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\</code><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \ &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;sc_ret; </span> &nbsp; &nbsp; \</code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">})</code></pre><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">根据相关宏定义展开：</span></p><pre data-source-line="644" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">SYSCALL_CANCEL (<span class="" style="max-width: 100%;color: rgb(0, 0, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">openat</span>, AT_FDCWD, file, oflag, mode)<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">;</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">-&gt; __SYSCALL_CALL (<span class="" style="max-width: 100%;color: rgb(0, 0, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">penat</span>, AT_FDCWD, file, oflag, mode)<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">;</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">-&gt; __SYSCALL_DISP (<span class="" style="max-width: 100%;color: rgb(0, 0, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">__SYSCALL</span>, openat, AT_FDCWD, file, oflag, mode)<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">;</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">-&gt; __SYSCALL_CONCAT(<span class="" style="max-width: 100%;color: rgb(0, 0, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">__SYSCALL</span>, <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">4</span>)(<span class="" style="max-width: 100%;color: rgb(0, 0, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">openat</span>, AT_FDCWD, file, oflag, mode)</code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">-&gt; __SYSCALL_CONCAT_X(<span class="" style="max-width: 100%;color: rgb(0, 0, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">__SYSCALL</span>, <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">4</span>)(<span class="" style="max-width: 100%;color: rgb(0, 0, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">openat</span>, AT_FDCWD, file, oflag, mode)
-&gt; __SYSCALL4(<span class="" style="max-width: 100%;color: rgb(0, 0, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">openat</span>, AT_FDCWD, file, oflag, mode)
-&gt; INLINE_SYSCALL(<span class="" style="max-width: 100%;color: rgb(0, 0, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">openat</span>, <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">4</span>, AT_FDCWD, file, oflag, mode)</code></pre><p style="max-width: 100%;min-height: 1em;line-height: 1.5em;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;<span style="max-width: 100%;font-family: 宋体, SimSun;box-sizing: border-box !important;overflow-wrap: break-word !important;">(7)</span>INLINE_SYSCALL<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">之后宏定义与硬件和</span>os<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">有关，在</span>glibc<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">源码路径</span><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">sysdeps/unix/sysv/linux/x86_64/sysdep.h</strong><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">中定义：</span></p><pre data-source-line="655" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 153);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;"># <span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">define</span> INLINE_SYSCALL(name, nr, args...) \</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">({ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;unsigned <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">long</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">int</span> resultvar = INTERNAL_SYSCALL (name, , nr, args); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\ &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;if</span> (__glibc_unlikely (INTERNAL_SYSCALL_ERROR_P (resultvar, ))) &nbsp; &nbsp; &nbsp; &nbsp;\</code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;{ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \
 &nbsp; &nbsp; &nbsp; &nbsp;__set_errno (INTERNAL_SYSCALL_ERRNO (resultvar, )); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \
 &nbsp; &nbsp; &nbsp; &nbsp;resultvar = (unsigned <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">long</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">int</span>) <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">-1</span>; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \
 &nbsp; &nbsp;} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \</code><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;(<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">long</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">int</span>) resultvar; </code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">})</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 153);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;"># <span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">define</span> INTERNAL_SYSCALL(name, err, nr, args...) \</span></code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;INTERNAL_SYSCALL_NCS (__NR_<span class="" style="max-width: 100%;color: rgb(153, 153, 153);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">##name, err, nr, ##args)</span></code></pre><p style="max-width: 100%;min-height: 1em;line-height: 20px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">根据相关宏定义展开：</span><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;line-height: 20px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><pre data-source-line="671" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">INLINE_SYSCALL(<span class="" style="max-width: 100%;color: rgb(0, 0, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">openat</span>, <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">4</span>, AT_FDCWD, file, oflag, mode)
-&gt; INTERNAL_SYSCALL(<span class="" style="max-width: 100%;color: rgb(0, 0, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">openat</span>, &nbsp;, <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">4</span>, AT_FDCWD, file, oflag, mode)
-&gt; INTERNAL_SYSCALL_NCS(<span class="" style="max-width: 100%;color: rgb(0, 0, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">__NR_openat</span>, &nbsp;, <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">4</span>, AT_FDCWD, file, oflag, mode )</code></pre><p style="max-width: 100%;min-height: 1em;line-height: 1.5em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; (8)经过一系列展开，最终到达</span>INTERNAL_SYSCALL_NCS<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">：</span></p><pre data-source-line="678" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 153);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;"># define INTERNAL_SYSCALL_NCS(name, err, nr, args...) \</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">({ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\ &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;unsigned</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">long</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">int</span> resultvar; &nbsp; &nbsp; &nbsp;\</code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;LOAD_ARGS_<span class="" style="max-width: 100%;color: rgb(153, 153, 153);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">##nr (args) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \</span>
 &nbsp; &nbsp;LOAD_REGS_<span class="" style="max-width: 100%;color: rgb(153, 153, 153);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">##nr &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\</span></code><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">asm</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">volatile</span> ( &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\ &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(221, 17, 68);box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;"syscall\n\t"</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \</code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;: <span class="" style="max-width: 100%;color: rgb(221, 17, 68);box-sizing: border-box !important;overflow-wrap: break-word !important;">"=a"</span> (resultvar) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\
 &nbsp; &nbsp;: <span class="" style="max-width: 100%;color: rgb(221, 17, 68);box-sizing: border-box !important;overflow-wrap: break-word !important;">"0"</span> (name) ASM_ARGS_<span class="" style="max-width: 100%;color: rgb(153, 153, 153);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">##nr : <span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">"memory"</span>, REGISTERS_CLOBBERED_BY_SYSCALL); \</span>
 &nbsp; &nbsp;(<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">long</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">int</span>) resultvar; })</code></pre><p style="max-width: 100%;min-height: 1em;line-height: 1.5em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;</span><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">(9)可以看到</span>LOAD_ARGS_##nr<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">把参数</span>args<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">展开，</span>LOAD_REGS_##nr<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">设置相应参数到相应地寄存器中，汇编嵌入调用</span>syscall<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">指令执行系统调用。</span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><h3 style="font-weight: bold;max-width: 100%;line-height: 1.6em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">4.2 syscall系统调用初始化</strong></span></h3><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; &nbsp;<span class="Apple-converted-space">&nbsp;</span><span style="max-width: 100%;font-family: 宋体, SimSun;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">基于linux-4.20内核源码进行分析：</span><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></strong></span></p><p style="max-width: 100%;min-height: 1em;text-indent: 28px;line-height: 1.5em;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;">syscall<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">系统调用初始化在内核启动执行路径中：</span><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">start_kernel() -&gt; trap_init() -&gt; cpu_init() -&gt; syscall_init()<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">。</span></strong></p><p style="max-width: 100%;min-height: 1em;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; &nbsp;&nbsp;<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">在</span><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">arch/x86/kernel/cpu/common.c</strong><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">中可以看到</span>syscall_init()<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">函数：</span></p><pre data-source-line="698" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">void</span> <span class="" style="max-width: 100%;color: rgb(153, 0, 0);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">syscall_init</span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">(<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">void</span>)</span></span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">{</code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;wrmsr(MSR_STAR, <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">0</span>, (__USER32_CS &lt;&lt; <span class="" style="max-width: 100%;color: rgb(0, 128, 128);box-sizing: border-box !important;overflow-wrap: break-word !important;">16</span>) | __KERNEL_CS);
 &nbsp; &nbsp;wrmsrl(MSR_LSTAR, (<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">unsigned</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">long</span>)entry_SYSCALL_64);
 &nbsp; &nbsp;...
}</code></pre><p style="max-width: 100%;min-height: 1em;text-indent: 28px;line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;">syscall_init()<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">函数源码可以看到对相应地</span>MSR<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">寄存器进行初始化：</span></p><p style="max-width: 100%;min-height: 1em;text-indent: 28px;line-height: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">(1)向</span>MSR_STAR<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">的</span>32 ~ 47<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">位写入内核态的</span>cs<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">，向</span>48 ~ 64<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">位设置用户态的</span>cs。</p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; (2)向</span>MSR_LSTAR<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">写入</span>entry_SYSCALL_64<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">函数入口地址。</span></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><h3 style="font-weight: bold;max-width: 100%;line-height: 1.6em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">4.3 执行syscall</strong></span></h3><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;line-height: 1.5em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; 执行</span>syscall<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">，会跳转到</span>entry_SYSCALL_64<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">，在</span><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">arch/x86/entry/entry_64.S</strong><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">中可以找到</span>entry_SYSCALL_64<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">：</span></p><pre data-source-line="712" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 0, 115);box-sizing: border-box !important;overflow-wrap: break-word !important;">ENTRY</span>(entry_SYSCALL_64)
 &nbsp; &nbsp;UNWIND_HINT_EMPTY</code><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;swapgs &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">movq </span> &nbsp; %rsp, PER_CPU_VAR(cpu_tss_rw + TSS_sp2) &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;SWITCH_TO_KERNEL_CR3 </span>scratch_reg=%rsp &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;movq </span> &nbsp; PER_CPU_VAR(cpu_current_top_of_stack), %rsp &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;pushq </span> &nbsp;$__USER_DS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">/* pt_regs-&gt;ss */</span></code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">pushq </span> PER_CPU_VAR(cpu_tss_rw + TSS_sp2) &nbsp; <span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">/* pt_regs-&gt;sp */</span>
 &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">pushq </span> &nbsp;%<span class="" style="max-width: 100%;color: rgb(0, 134, 179);box-sizing: border-box !important;overflow-wrap: break-word !important;">r11</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">/* pt_regs-&gt;flags */</span>
 &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">pushq </span> &nbsp;$__USER_CS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">/* pt_regs-&gt;cs */</span></code><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">pushq </span> &nbsp;%rcx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">/* pt_regs-&gt;ip */</span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 0, 115);box-sizing: border-box !important;overflow-wrap: break-word !important;">GLOBAL</span>(entry_SYSCALL_64_after_hwframe) &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;pushq </span> &nbsp;%rax &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">/* pt_regs-&gt;orig_ax */</span></code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">
 &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">PUSH_AND_CLEAR_REGS </span>rax=$-ENOSYS

 &nbsp; &nbsp;TRACE_IRQS_OFF &nbsp; &nbsp;<span class="" style="max-width: 100%;color: rgb(153, 153, 136);font-style: italic;box-sizing: border-box !important;overflow-wrap: break-word !important;">/* IRQs are off. */</span></code><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">movq </span> &nbsp; %rax, %rdi &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;movq </span> &nbsp; %rsp, %rsi</code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;call &nbsp; &nbsp;do_syscall_64
 &nbsp; &nbsp;...</code></pre><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; (1)保存现场将相关寄存器中的值压栈，包括：</span></p><p style="margin-left: 28px;max-width: 100%;min-height: 1em;line-height: 20px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; &nbsp; - rax system call number</p><p style="margin-left: 28px;max-width: 100%;min-height: 1em;line-height: 20px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;- rcx return address</p><p style="margin-left: 28px;max-width: 100%;min-height: 1em;line-height: 20px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;- r11 saved rflags (note: r11 is callee-clobbered register in C ABI)</p><p style="margin-left: 28px;max-width: 100%;min-height: 1em;line-height: 20px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;- rdi arg0</p><p style="margin-left: 28px;max-width: 100%;min-height: 1em;line-height: 20px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;- rsi arg1</p><p style="margin-left: 28px;max-width: 100%;min-height: 1em;line-height: 20px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;- rdx arg2</p><p style="margin-left: 28px;max-width: 100%;min-height: 1em;line-height: 20px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;- r10 arg3 (needs to be moved to rcx to conform to C ABI)</p><p style="margin-left: 28px;max-width: 100%;min-height: 1em;line-height: 20px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;- r8 arg4</p><p style="margin-left: 28px;max-width: 100%;min-height: 1em;line-height: 20px;text-indent: 0em;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;- r9 arg5&nbsp;</p><p style="max-width: 100%;min-height: 1em;line-height: 1.5em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; (2)调用</span>do_syscall_64<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">来继续执行，在</span><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">arch/x86/entry/common.c</strong><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">中：</span></p><pre data-source-line="751" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">__<span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">visible <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">void</span> <span class="" style="max-width: 100%;color: rgb(153, 0, 0);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">do_syscall_64</span><span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">(<span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">unsigned</span> <span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">long</span> nr, struct pt_regs *regs)</span></span></code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">{</code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;...
 &nbsp; &nbsp;nr = syscall_trace_enter(regs);</code><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;nr &amp;= __SYSCALL_MASK; &nbsp; &nbsp;</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;if</span> (likely(nr &lt; NR_syscalls)) {</code></p><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp; &nbsp; &nbsp;nr = array_index_nospec(nr, NR_syscalls);
 &nbsp; &nbsp; &nbsp; &nbsp;regs-&gt;ax = sys_call_table[nr](regs);
 &nbsp; &nbsp;}
 &nbsp; &nbsp;syscall_return_slowpath(regs);
}</code></pre><p style="max-width: 100%;min-height: 1em;line-height: 1.5em;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;">syscall_trace_enter<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">取出系统调用号<span class="Apple-converted-space">&nbsp;</span></span>nr<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">；到</span>sys_call_table<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">中去找到</span>nr<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">号对应的系统调用服务程序去执行后返回值放入</span>ax<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">。</span></p><p style="max-width: 100%;min-height: 1em;line-height: 1.5em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp; (3)全部执行完毕后会调用</span>USERGS_SYSRET64<span style="max-width: 100%;font-family: 宋体;box-sizing: border-box !important;overflow-wrap: break-word !important;">返回：</span></p><pre data-source-line="769" style="margin-top: 0px;margin-bottom: 16px;padding: 16px;max-width: 100%;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace;font-size: 11.9px;font-stretch: normal;line-height: 1.45;overflow: auto;border-radius: 3px;color: rgb(36, 41, 46);background-color: rgb(246, 248, 250);box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">ENTRY(entry_SYSCALL_64)
 &nbsp; &nbsp;...</code><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"> &nbsp; &nbsp;USERGS_SYSRET64</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">END</span>(entry_SYSCALL_64)</code></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><code class="" style="max-width: 100%;display: inline;overflow: visible;color: rgb(51, 51, 51);font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;border-radius: 3px;word-break: normal;border-width: 0px;border-style: initial;border-color: initial;line-height: inherit;background: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;color: rgb(153, 153, 153);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;">#<span class="" style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">define</span> USERGS_SYSRET64 \
swapgs; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \
sysretq</span></code><span style="max-width: 100%;color: rgb(153, 153, 153);font-weight: bold;font-family: SFMono-Regular, Consolas, Menlo, Courier, monospace, sans-serif;background-color: transparent;box-sizing: border-box !important;overflow-wrap: break-word !important;">;</span></p></pre><section class="" data-tools="135编辑器" data-id="94052" style="max-width: 100%;box-sizing: border-box;border-width: 0px;border-style: none;border-color: initial;overflow-wrap: break-word !important;"><section data-width="100%" style="max-width: 100%;width: 625.813px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-bgless="spin" data-bglessp="280" data-bgopacity="50%" style="margin-bottom: -4.8em;max-width: 100%;box-sizing: border-box;width: 5em;height: 5em;border-bottom-right-radius: 100%;background: rgb(231, 246, 253);overflow-wrap: break-word !important;"></section><section style="padding-right: 0.3em;padding-left: 0.2em;max-width: 100%;box-sizing: border-box;overflow-wrap: break-word !important;"><section style="margin-right: auto;margin-left: auto;max-width: 100%;box-shadow: rgb(230, 230, 230) 0px 0px 3px;border-width: 1px;border-style: solid;border-color: rgb(240, 240, 240);transform: rotate(0deg);box-sizing: border-box !important;overflow-wrap: break-word !important;"><section data-autoskip="1" class="" data-bgless="spin" data-bglessp="280" data-bgopacity="50%" style="padding: 1em;max-width: 100%;box-sizing: border-box;font-size: 14px;line-height: 1.75em;background: rgba(255, 255, 255, 0.8);overflow-wrap: break-word !important;"><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;本文对32位和64位下的快速系统调用指令进行了介绍和分析，通过对用户态进行系统调用的程序执行过程追踪，以及对linux-2.6.39和linux-4.20内核源码中支持快速系统调用相关部分进行分析，了解了进行系统调用的执行过程和内核对快速系统调用的相关操作。</p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;下篇将基于Linux-5.0-rc2内核，添加系统调用，完成一个”系统调用日志收集系统“，并对系统调用分析进行总结。<br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p><p style="max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"  /></p></section></section></section><section data-bgless="spin" data-bglessp="120" data-bgopacity="50%" style="margin-top: -4.7em;max-width: 100%;box-sizing: border-box;width: 5em;height: 5em;border-top-left-radius: 100%;float: right;background: rgb(192, 182, 235);overflow-wrap: break-word !important;"></section></section></section></section></section></section></section></section></section><hr style="border-style: solid;border-width: 1px 0 0;border-color: rgba(0,0,0,0.1);-webkit-transform-origin: 0 0;-webkit-transform: scale(1, 0.5);transform-origin: 0 0;transform: scale(1, 0.5);"  /><p style="max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;widows: 1;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;letter-spacing: 0.544px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;letter-spacing: 0.544px;color: rgb(61, 167, 66);box-sizing: border-box !important;overflow-wrap: break-word !important;"></span></strong><br  /></p><p style="max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;widows: 1;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;letter-spacing: 0.544px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;letter-spacing: 0.544px;color: rgb(61, 167, 66);box-sizing: border-box !important;overflow-wrap: break-word !important;">查看我们精华技术文章请移步:</span></strong></p><p style="max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;widows: 1;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzAwMDUwNDgxOA==&amp;mid=2652665556&amp;idx=1&amp;sn=17bc2adf8ce33ad0fef063b9e82f4dfa&amp;chksm=810f3049b678b95f0ecd89dfde2ad4ba8ffe15a9d7a63e7bec7b04c79b780ef4719f1120a179&amp;scene=21#wechat_redirect" target="_blank" data-linktype="2" style="color: rgb(87, 107, 149);-webkit-tap-highlight-color: rgba(0, 0, 0, 0);max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">Linux阅码场原创精华文章汇总</a></p>
                </div>
                

                
  <div class="ct_mpda_wrp" id="js_sponsor_ad_area" style="display: none;"></div>


                
                <div class="read-more__area" id="js_more_read_area" style="display:none;">
                    
                </div>

                
                                <div class="reward_area tc reward_area_primary" id="js_preview_reward_author" style="display:none;">
                    <div class="reward-avatar" style="display: none;" id="js_preview_reward_author_avatar">
                        <img src="" alt="" id="js_preview_reward_author_head">
                    </div>
                    
                                        <div class="reward-author" id="js_preview_reward_author_name">张凯捷</div>
                                        <p class="reward_tips" id="js_preview_reward_author_wording" style="display:none;"></p>
                    <p class="reward_button_wrp">
                    
                      <span class="reward_pop_panel">
                        <img src="https://res.wx.qq.com/mpres/zh_CN/htmledition/pages/home/index/pic_mp_app4290ba.png" alt="">
                        <strong>扫一扫下载订阅号助手，用手机发文章</strong>
                      </span>
                        <a class="reward_button" id='js_preview_reward_author_link' href="##"><span id="js_preview_reward_link_text">赞赏</span></a>
                    </p>
                </div>

                <div class="reward_qrcode_area reward_area tc" id="js_preview_reward_qrcode" style="display:none;">
                    <p class="tips_global">长按二维码向我转账</p>
                    <p id="js_preview_reward_ios_wording" class="reward_tips" style="display:none;"></p>
                    <span class="reward_qrcode_img_wrp"><img class="reward_qrcode_img" src="res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/pic/appmsg/pic_reward_qrcode.2x42f400.png"></span>
                    <p class="tips_global">受苹果公司新规定影响，微信 iOS 版的赞赏功能被关闭，可通过二维码转账支持公众号。</p>
                </div>
                            </div>
		<div class="comment">
			<h3 style="margin:26px 0;font-weight:100;padding-bottom:4px;border-bottom:1px solid #ccc;">精选留言</h3>
		    暂无...
		</div>
	</div>
	<div class='dy_all'>
		<a href='https://www.52pojie.cn/' target='_blank'>
			吾爱破解论坛
		</a>
	</div>
</body>